<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AIlury 1.9</title>
  <link rel="icon" type="image/ICO" href="templates/Favicon.ICO">
  <style>
    :root {
      --primary-color: black;
      --sekundary-color: white;
      --grey-color: #ccc;
      --darkgrey-color: #fff;
      --lightcyan-color: lightcyan;
      --cyan-color: cyan;
      --white-color: black;
      --bcolor-color: #ccc;
      --ngrey-color: #ccc;
      --232323-color: #BCBCBC;
      --676767-color: #FBFBFB;
      --newc-color: #367af6;
      --2323232-color: #BCBCBC;
      --2323233-color: #BCBCBC;
      --bubble-color: #ccc;
      --plane-color: #757575;
    }

    /* #5c3884 */
    /*.notdark-theme{
        --primary-color: white;
        --sekundary-color: black;
        --grey-color: #0f87ff;
        --darkgrey-color: #000;
        --lightcyan-color: #7d9eff;
        --cyan-color: darkcyan;
        --white-color: lightgrey;
        --bcolor-color: #367af6; */
    /*blue*/
    /*--ngrey-color: #161616;*/
    /*#1a1f2c;*/
    /*--232323-color: #232323;
        --676767-color: #676767;
        --newc-color: #01feec;*/
    /*#367af6;*/
    /*--2323232-color: #232323;
        --2323233-color: #232323;
      }*/
    .dark-theme {
      --primary-color: white;
      --sekundary-color: black;
      --grey-color: #0f87ff;
      --darkgrey-color: #000;
      --lightcyan-color: #7d9eff;
      --cyan-color: darkcyan;
      --white-color: lightgrey;
      --bcolor-color: #367af6;
      /*blue*/
      --ngrey-color: #161616;
      /*#1a1f2c;*/
      --232323-color: #232323;
      --676767-color: #676767;
      --newc-color: #367af6;
      --2323232-color: #fff;
      --2323233-color: #232323;
      --bubble-color: #555;
      --plane-color: #757575;
    }

    .nice-theme {
      --primary-color: white;
      --sekundary-color: black;
      --grey-color: #0f87ff;
      --darkgrey-color: #403d80;
      --lightcyan-color: #7d9eff;
      --cyan-color: darkcyan;
      --white-color: #010758;
      --bcolor-color: #ff2963;
      --ngrey-color: linear-gradient(45deg, #010758, #490d61);
      --232323-color: linear-gradient(45deg, #010758, #490d61);
      --676767-color: #fff;
      --newc-color: #ff2963;
      --2323232-color: #BCBCBC;
      --2323233-color: #403d80;
      --bubble-color: #010758;
      --plane-color: #490d61;
    }

    .beautiful-theme{
        --primary-color: white;
        --sekundary-color: black;
        --grey-color: #0f87ff;
        --darkgrey-color: #171530;
        --lightcyan-color: #7d9eff;
        --cyan-color: darkcyan;
        --white-color: #16142c;
        --bcolor-color: #3672b5;
        --ngrey-color: linear-gradient(45deg, #0b091f, #13112d);
        --232323-color: linear-gradient(45deg, #0b091f, #13112d);
        --676767-color: #fff;
        --newc-color: #3672b5;
        --2323232-color: #000;
        --2323233-color: #171530;
        --bubble-color: #0b091f;
        --plane-color: #fff;
    }
    input[type=text] {
      background: transparent;
      /*linear-gradient(45deg, #010758, #490d61);*/
      color: var(--primary-color);
      font-weight: bold;
      font-size: 40px;
      text-align: left;
    }

    input[type=text]:focus {
      outline: none;
      border: none;
    }

    @media(min-width: 750px) {
      body {
        font-family: Arial, sans-serif;
        background: var(--ngrey-color);
        margin: 0;
        transition: 1s;
      }

      .bell {
        position: absolute;
        width: 50px;
        height: 50px;
        left: 165px;
        top: 10px;
        transition: 1s;
      }
      .plane {
          position: relative;
          width: 57px;
          height: 57px;
          margin-top: 9px;
          margin-right: 25px;
          margin-left: -30px;
          background-color: transparent;
      }
      @keyframes sendAnimation {
        0% {
          margin-top: 9px;
          margin-right: 25px;
          transform: rotate(0deg);

        }
        50% {
          margin-right: -50px;
          margin-top: -40px;
          transform: rotate(-60deg);
        }
        100%{
          margin-top: 9px;
          margin-right: 25px;
          transform: rotate(0deg);
        }
      }

      .hilfe-knopf {
        position: absolute;
        width: 50px;
        height: 50px;
        right: 20px;
        top: 10px;
        transition: 1s;
      }

      .hilfe-body {
        position: absolute;
        top: 10px;
        left: 50%;
        width: 30px;
        height: 30px;
        background: var(--darkgrey-color);
        border-radius: 50%;
        transform: translateX(-50%);
        border: 2.5px solid var(--primary-color);
        border-bottom: none;
        transition: 1s;
      }

      .hilfe-body::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        width: 13px;
        height: 10px;
        background: var(--darkgrey-color);
        border-radius: 2px 2px 5px 5px;
        border: 1.5px solid var(--primary-color);
        border-top: none;
        /* invert the border radius for the top part so the border radius goes in and not out*/
        transform: translateX(-50%);
        transition: 1s;
      }

      .hilfe-clapper {
        position: absolute;
        bottom: -7px;
        left: 50%;
        width: 13px;
        height: 3px;
        background: var(--primary-color);
        border-radius: 10px;
        transform: translateX(-50%);
        /*border-left: 2px solid var(--primary-color);
        border-right: 2px solid var(--primary-color);
        border-bottom: 2px solid var(--primary-color);
        border-top: 2px solid var(--2323233-color);*/
        transition: 1s;
      }
      .hilfe-clapper:before {
        content: '';
        position: absolute;
        bottom: -3px;
        left: 50%;
        width: 13px;
        height: 3px;
        background: var(--primary-color);
        border-radius: 10px;
        transform: translateX(-50%);
        /*border-left: 2px solid var(--primary-color);
        border-right: 2px solid var(--primary-color);
        border-bottom: 2px solid var(--primary-color);
        border-top: 2px solid var(--2323233-color);*/
        transition: 1s;
      }
      .hilfe-clapper:after {
        content: '';
        position: absolute;
        bottom: -6px;
        left: 50%;
        width: 13px;
        height: 3px;
        background: var(--primary-color);
        border-radius: 10px;
        transform: translateX(-50%);
        /*border-left: 2px solid var(--primary-color);
        border-right: 2px solid var(--primary-color);
        border-bottom: 2px solid var(--primary-color);
        border-top: 2px solid var(--2323233-color);*/
        transition: 1s;
      }
      #navlinks {
        display: none;
      }

      .chat {
        display: flex;
        justify-content: space-between;
      }

      .bigscreenbtns {
        display: block;
        align-items: left;
      }

      .smallscreenbtns {
        display: none;
      }

      .chat-container {
        width: 1000px;
        border: 1px solid var(--darkgrey-color);
        border-radius: 10px;
        background: var(--darkgrey-color);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        display: flex;
        flex-direction: column;
        /* make it go on the right corner */
        height: 100vh;
        /* Volle Höhe des Viewports */
        transition: 1s;
      }

      .chat-container:hover {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
      }

      .chat-messages {
        flex: 1;
        /* Füllt den verfügbaren Platz aus */
        overflow-y: auto;
        padding: 10px;
      }

      .bigscreenbtns a {
        display: flex;
        background: var(--newc-color);
        /*#82be5d;*/
        color: var(--2323232-color);
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 25px;
        font-weight: bold;
        margin-left: 5px;
        text-align: left;
        transition: 1s;
      }

      .message {
        margin-bottom: 10px;
        padding: 15px 20px;
        max-width: 60%;
        border-radius: 40px;
        word-wrap: break-word;
      }

      .sent {
        background: var(--232323-color);
        align-self: flex-end;
        text-align: left;
        font-size: 40px;
        margin-left: 30%;
        color: var(--primary-color);
        max-width: 50%;
        /*margin-left: 30%;*/
        transition: 0.5s;
        border-bottom-right-radius: 0;
        animation: blop2 0.5s;
      }

      .sent:hover {
        box-shadow: 0 0 20px 0px rgba(0, 0, 0, 0.2);
      }

      .received {
        background: var(--232323-color);
        align-self: flex-start;
        text-align: left;
        color: var(--primary-color);
        /*max-width: 50%;*/
        font-size: 40px;
        transition: 0.5s;
        border-bottom-left-radius: 0;
        animation: blop 0.5s;
      }

      .received:hover {
        box-shadow: 0 0 20px 0px rgba(0, 0, 0, 0.2);
      }

      .chat-input {
        display: flex;
        align-items: center;
        padding: 10px;
        /*border-top: 1px solid var(--grey-color);*/
        border-radius: 20px;
        transition: 1s;
      }

      .chat-input input {
        flex: 1;
        padding: 15px;
        margin-right: 10px;
        border: none;
        border-radius: 30px;
        color: var(--primary-color);
        background: var(--232323-color);
        font-size: 35px;
        font-weight: bold;
        text-align: left;
        transition: 1s;
      }

      .chat-input button {
        padding: 8px 15px;
        border: none;
        background: var(--232323-color);
        color: var(--primary-color);
        border-radius: 30px;
        cursor: pointer;
        height: 72px;
        transition: 1s;
      }

      .user-input {
        color: var(--white-color);
      }

      .chat-input input:focus {
        outline: 2px solid var(--newc-color);
        border: none;
      }

      ::placeholder {
        color: #676767;
      }

      .nav-links {
        display: none;
        height: 0px;
        /*flex: 1;
              text-align: right;
              cursor: pointer;*/
      }

      .nav-links ul li {
        display: none;
        /*list-style: none;
              display: inline-block;
              padding: 8px 12px;
              position: relative;*/
      }

      .nav-links ul li a {
        display: none;
        /*color: var(--primary-color);
              text-decoration: none;
              font-size: 20px;
              transition: 1s;*/
      }

      .nav-links ul li::after {
        display: none;
        /*content: '';
              width: 0%;
              height: 2px;
              background: var(--cyan-color);
              display: block;
              margin: auto;
              transition: 0.5s;*/
      }

      .bcft {
        display: none;
        /*background: var(--newc-color);
              border-radius: 10px;
              padding: 10px;
              transition: 1s;*/
      }

      #button1 img {
        height: 50px;
      }

      #einstellungen {
        display: none;
        /*width: 70px;
              height: 70px;
              margin-left: 80%;
              margin-top: 10px;
              cursor: pointer;
              transition: 1s;
              font-size: 70px;
              color: var(--primary-color);*/
      }

      #button2 {
        display: none;
        transition: 1s;
      }

      #button3 {
        display: none;
        margin-left: 5px;
        background-color: orange;
        transition: 1s;
      }

      .bcft1 {
        display: none;
        /*background: var(--newc-color);
              border-radius: 10px;
              padding: 10px;
              height: 30px;
              transition: 1s;*/
      }

      #nmy {
        transition: 0.5s;
      }

      #nmy:hover {
        box-shadow: 0 0 20px 0px rgba(0, 0, 0, 0.2);
      }

      #messageE {}

      @keyframes blop {
        from {
          width: 0px;
          font-size: 0px;
        }

        to {
          width: 100%;
          font-size: 40px;
        }
      }

      @keyframes blop2 {
        from {
          margin-left: 100%;
          width: 0px;
          font-size: 0px;
        }

        to {
          margin-left: 30%;
          width: 100%;
          font-size: 40px;
        }
      }

      .intro {
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100vh;
        background-color: #161616;
        transition: 1s;
      }

      .logo-header {
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #fff;
      }

      .logo {
        position: relative;
        display: inline-block;
        bottom: -20px;
        opacity: 0;
      }

      .logo.active {
        bottom: 0;
        opacity: 1;
        transition: ease-in-out 0.5s;
      }

      .logo.fade {
        bottom: 150px;
        opacity: 0;
        transition: ease-in-out 0.5s;
      }

      .container {
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        transition: 1s;
      }

      .user-profile {
        /* make all items be under each other*/
        /* make every item have a space on top and bottom */
        border-radius: 10px;
        background: var(--2323233-color);
        color: var(--676767-color);
        max-width: 400px;
        height: 89vh;
        border: none;
        text-align: center;
        padding: 45px;
        align-items: center;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        transition: 1s;
      }

      #username-display {
        margin-top: 10px;
        font-size: 24px;
        font-weight: bold;
        text-align: center;
        transition: 1s;
      }

      .user-profile img {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        margin-top: 15%;
        /* make so the image doesnt strech in its frame*/
        object-fit: cover;
      }

      #logout {
        display: flex;
        background: var(--newc-color);
        color: var(--2323232-color);
        border: none;
        cursor: pointer;
        font-size: 25px;
        padding: 5px 10px;
        border-radius: 5px;
        font-weight: bold;
        margin-left: 5px;
        transition: 1s;
      }

      #username-display {
        font-weight: bold;
        font-size: 40px;
        transition: 1s;
      }

      #Löschbtn {
        display: none;
        background: var(--232323-color);
        /*var(--bcolor-color);*/
        color: var(--primary-color);
        border: none;
        border-radius: 10px;
        text-align: center;
        height: 30px;
        width: 100%;
        margin-top: 10px;
        transition: 1s;
      }

      #Editbtn {
        display: none;
        background: var(--232323-color);
        /*var(--bcolor-color);*/
        color: var(--primary-color);
        border: none;
        border-radius: 10px;
        text-align: center;
        height: 30px;
        width: 100%;
        margin-top: 10px;
        transition: 1s;
      }

      #Breakbtn {
        display: none;
        background: var(--232323-color);
        /*var(--bcolor-color);*/
        color: var(--primary-color);
        border: none;
        border-radius: 10px;
        text-align: center;
        height: 30px;
        margin-top: 10px;
        transition: 1s;
      }

      #speakon {
        display: flex;
        background: var(--newc-color);
        /*#82be5d;*/
        color: var(--2323232-color);
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 25px;
        font-weight: bold;
        margin-left: 5px;
        transition: 1s;
      }

      .RandomQuestion {
        display: flex;
        /*margin-top: 20px;*/
        background: var(--newc-color);
        /*#82be5d;*/
        color: var(--2323232-color);
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 25px;
        font-weight: bold;
        margin-left: 5px;
        transition: 1s;
      }

      #inscructionlink {
        background: var(--232323-color);
        /*#ff5722;*/
        color: var(--sekundary-color);
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 15px;
        font-weight: bold;
        margin-left: 5px;
        transition: 1s;
      }
    }

    @media(max-width: 750px) {
      body {
        font-family: Arial, sans-serif;
        background: var(--ngrey-color);
        margin: 0;
        transition: 1s;
      }

      .bell {
        position: absolute;
        width: 50px;
        height: 50px;
        right: 10px;
        top: 53px;
        transition: 1s;
      }
      .plane {
          position: relative;
          width: 57px;
          height: 37px;
          margin-top: 3px;
          margin-right: 25px;
          margin-left: -30px;
          background-color: transparent;
      }
      @keyframes sendAnimation {
        0% {
          margin-top: 3px;
          margin-right: 25px;
          transform: rotate(0deg);

        }
        50% {
          margin-right: -50px;
          margin-top: -40px;
          transform: rotate(-60deg);
        }
        100%{
          margin-top: 3px;
          margin-right: 25px;
          transform: rotate(0deg);
        }
      }

      .hilfe-knopf {
        position: absolute;
        width: 50px;
        height: 50px;
        right: 20px;
        top: 265px;
        transition: 1s;
      }

      .hilfe-body {
        position: absolute;
        top: 10px;
        left: 50%;
        width: 30px;
        height: 30px;
        background: var(--darkgrey-color);
        border-radius: 50%;
        transform: translateX(-50%);
        border: 2.5px solid var(--primary-color);
        border-bottom: none;
        transition: 1s;
      }

      .hilfe-body::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        width: 13px;
        height: 10px;
        background: var(--darkgrey-color);
        border-radius: 2px 2px 5px 5px;
        border: 1.5px solid var(--primary-color);
        border-top: none;
        /* invert the border radius for the top part so the border radius goes in and not out*/
        transform: translateX(-50%);
        transition: 1s;
      }

      .hilfe-clapper {
        position: absolute;
        bottom: -7px;
        left: 50%;
        width: 13px;
        height: 3px;
        background: var(--primary-color);
        border-radius: 10px;
        transform: translateX(-50%);
        /*border-left: 2px solid var(--primary-color);
        border-right: 2px solid var(--primary-color);
        border-bottom: 2px solid var(--primary-color);
        border-top: 2px solid var(--2323233-color);*/
        transition: 1s;
      }
      .hilfe-clapper:before {
        content: '';
        position: absolute;
        bottom: -3px;
        left: 50%;
        width: 13px;
        height: 3px;
        background: var(--primary-color);
        border-radius: 10px;
        transform: translateX(-50%);
        /*border-left: 2px solid var(--primary-color);
        border-right: 2px solid var(--primary-color);
        border-bottom: 2px solid var(--primary-color);
        border-top: 2px solid var(--2323233-color);*/
        transition: 1s;
      }
      .hilfe-clapper:after {
        content: '';
        position: absolute;
        bottom: -6px;
        left: 50%;
        width: 13px;
        height: 3px;
        background: var(--primary-color);
        border-radius: 10px;
        transform: translateX(-50%);
        /*border-left: 2px solid var(--primary-color);
        border-right: 2px solid var(--primary-color);
        border-bottom: 2px solid var(--primary-color);
        border-top: 2px solid var(--2323233-color);*/
        transition: 1s;
      }
      input[type=text] {
        background: transparent;
        /*linear-gradient(45deg, #010758, #490d61);*/
        color: var(--primary-color);
        font-weight: bold;
        font-size: 30px;
        text-align: right;
      }

      #fontS {
        display: none;
      }

      .bigscreenbtns {
        display: none;
      }

      .smallscreenbtns {
        display: flex;
        justify-content: space-between;
      }

      .smallscreenbtns button {
        display: flex;
        background: var(--newc-color);
        /*#82be5d;*/
        color: var(--2323232-color);
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 25px;
        font-weight: bold;
        margin-left: 5px;
        transition: 1s;
      }

      #button1 img {
        height: 35px;
      }

      .chat-container {
        max-width: 600px;
        margin: 20px auto;
        border: 1px solid transparent;
        border-radius: 10px;
        background: var(--darkgrey-color);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        display: flex;
        flex-direction: column;
        height: 100vh;
        /* Volle Höhe des Viewports */
        transition: 1s;
      }

      .chat-container:hover {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
      }

      .chat-messages {
        flex: 1;
        /* Füllt den verfügbaren Platz aus */
        overflow-y: auto;
        padding: 10px;
      }

      .message {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 30px;
        max-width: 90%;
        word-wrap: break-word;
      }

      .sent {
        background: var(--232323-color);
        align-self: flex-end;
        text-align: right;
        font-size: 30px;
        color: var(--primary-color);
        /*max-width: 50%;
              margin-left: 30%;*/
        transition: 0.5s;
        border-bottom-right-radius: 0;
        animation: blop2 0.5s;
      }

      .sent:hover {
        box-shadow: 0 0 20px 0px rgba(0, 0, 0, 0.2);
      }

      .received {
        background: var(--232323-color);
        align-self: flex-start;
        text-align: left;
        font-size: 30px;
        color: var(--primary-color);
        /*max-width: 50%;*/
        transition: 0.5s;
        border-bottom-left-radius: 0;
        animation: blop 0.5s;
      }

      .received:hover {
        box-shadow: 0 0 20px 0px rgba(0, 0, 0, 0.2);
      }

      .chat-input {
        display: flex;
        align-items: center;
        padding: 10px;
        border-top: 1px solid transparent;
      }

      .chat-input input {
        flex: 1;
        padding: 15px;
        margin-right: 10px;
        border: none;
        border-radius: 10px;
        color: var(--primary-color);
        background: var(--232323-color);
        font-size: 20px;
        font-weight: bold;
        text-align: left;
        transition: 1s;
      }

      .chat-input button {
        padding: 8px 15px;
        border: none;
        background: var(--232323-color);
        color: var(--darkgrey-color);
        border-radius: 10px;
        cursor: pointer;
        transition: 1s;
      }

      .user-input {
        color: var(--white-color);
      }

      .chat-input input:focus {
        outline: 2px solid var(--newc-color);
        border: none;
      }

      .nav-links {
        flex: 1;
        text-align: right;
        cursor: pointer;
        display: none;
      }

      .nav-links ul li {
        display: none;
        /*list-style: none;
              display: inline-block;
              padding: 8px 12px;
              position: relative;*/
      }

      .nav-links ul li a {
        display: none;
        /*color: var(--primary-color);
              text-decoration: none;
              font-size: 20px;
              transition: 1s;*/
      }

      .nav-links ul li::after {
        display: none;
        /*content: '';
              width: 0%;
              height: 2px;
              background: var(--cyan-color);
              display: block;
              margin: auto;
              transition: 0.5s;*/
      }

      .bcft {
        /*background: var(--newc-color);
              border-radius: 10px;
              padding: 10px;*/

      }

      #einstellungen {
        display: none;
        /*width: 70px;
              height: 70px;
              margin-left: 80%;
              margin-top: 10px;
              cursor: pointer;
              transition: 1s;
              font-size: 70px;
              color: var(--primary-color);*/
      }

      #button2 {
        display: none;
        transition: 1s;
      }

      #button3 {
        display: none;
        margin-left: 5px;
        background-color: orange;
        transition: 1s;
      }

      .bcft1 {
        background: var(--newc-color);
        border-radius: 10px;
        padding: 10px;
        height: 30px;
      }

      #nmy {
        transition: 0.5s;
      }

      #nmy:hover {
        box-shadow: 0 0 20px 0px rgba(0, 0, 0, 0.2);
      }

      #messageE {}

      @keyframes blop {
        from {
          width: 0px;
          font-size: 0px;
        }

        to {
          width: 100%;
          font-size: 30px;
        }
      }

      @keyframes blop2 {
        from {
          margin-left: 100%;
          width: 0px;
          font-size: 0px;
        }

        to {
          margin-left: 0;
          width: 100%;
          font-size: 30px;
        }
      }

      .intro {
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100vh;
        background: #161616;
        transition: 1s;
      }

      .logo-header {
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #fff;
      }

      .logo {
        position: relative;
        display: inline-block;
        bottom: -20px;
        opacity: 0;
      }

      .logo.active {
        bottom: 0;
        opacity: 1;
        transition: ease-in-out 0.5s;
      }

      .logo.fade {
        bottom: 150px;
        opacity: 0;
        transition: ease-in-out 0.5s;
      }

      .container {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 20px;
      }

      .user-profile {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 20px;
        padding: 20px;
        border-radius: 10px;
        background: var(--2323233-color);
        color: var(--primary-color);
        width: 580px;
        border: 1px solid transparent;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        transition: 1s;
      }

      #username-display {
        font-size: 24px;
        font-weight: bold;
        text-align: center;
        transition: 1s;
      }

      .user-profile img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        margin-right: 20px;
        object-fit: cover;
      }

      #logout {
        display: flex;
        background: var(--newc-color);
        /*#82be5d;*/
        color: var(--2323232-color);
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 25px;
        font-weight: bold;
        margin-left: 5px;
        transition: 1s;
      }

      #username-display {
        font-weight: bold;
        font-size: 40px;
        transition: 1s;
      }

      #Löschbtn {
        display: none;
        background: var(--bcolor-color);
        color: var(--primary-color);
        border: none;
        border-radius: 10px;
        text-align: center;
        height: 30px;
        width: 100%;
        margin-top: 10px;
        transition: 1s;
      }

      #Editbtn {
        display: none;
        background: var(--bcolor-color);
        color: var(--primary-color);
        border: none;
        border-radius: 10px;
        text-align: center;
        height: 30px;
        width: 100%;
        margin-top: 10px;
        transition: 1s;
      }

      #Breakbtn {
        display: none;
        background: var(--bcolor-color);
        color: var(--primary-color);
        border: none;
        border-radius: 10px;
        text-align: center;
        height: 30px;
        width: 100%;
        margin-top: 10px;
        transition: 1s;
      }

      #speakon {
        display: flex;
        background: var(--newc-color);
        /*#82be5d;*/
        color: var(--2323232-color);
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 25px;
        font-weight: bold;
        margin-left: 5px;
        transition: 1s;
      }

      #inscructionlink {
        background: var(--newc-color);
        /*#367af6*/
        /*#ff5722;*/
        color: #fff;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 15px;
        margin-left: 5px;
        transition: 1s;
      }

      .RandomQuestion {
        display: flex;
        /*margin-top: 20px;*/
        background: var(--newc-color);
        /*#82be5d;*/
        color: var(--2323232-color);
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 25px;
        font-weight: bold;
        margin-left: 5px;
        transition: 1s;
      }
    }

    #info-box {
      display: none;
      position: absolute;
      /* Ermöglicht das freie Platzieren des Elements */
      width: 130px;
      padding: 20px;
      background: var(--bubble-color);
      /*#555;*/
      color: var(--primary-color);
      border-radius: 10px;
      text-align: center;
      font-size: 14px;
      margin-left: 3%;
      margin-top: 53px;
      transition: 1s;
      animation: fadeIn 0.2s ease-in;
    }

    #info-box::after {
      content: "";
      position: absolute;
      bottom: -20px;
      /* Position des Pfeils anpassen */
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-top: 20px solid var(--bubble-color);
      transition: 1s;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
      }

      100% {
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      0% {
        opacity: 1;
      }

      100% {
        opacity: 0;
      }
    }

    .bell-top {
      position: absolute;
      top: 0;
      left: 50%;
      width: 10px;
      height: 10px;
      background: var(--2323233-color);
      border-radius: 25px 25px 0 0;
      transform: translateX(-50%);
      margin-top: 5px;
      border: 2px solid var(--primary-color);
      transition: 1s;
    }

    .redball {
      display: block;
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: red;
      border-radius: 50%;
      top: 10px;
      right: 2px;
    }

    .bell-body {
      position: absolute;
      top: 10px;
      left: 50%;
      width: 30px;
      height: 35px;
      background: var(--2323233-color);
      border-radius: 35px 35px 0 0;
      transform: translateX(-50%);
      border: 2.5px solid var(--primary-color);
      transition: 1s;
    }

    .bell-body::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 50%;
      width: 40px;
      height: 10px;
      background: var(--2323233-color);
      border-radius: 14px 14px 5px 5px;
      border: 2.5px solid var(--primary-color);
      border-top: none;
      /* invert the border radius for the top part so the border radius goes in and not out*/
      transform: translateX(-50%);
      transition: 1s;
    }

    .bell-clapper {
      position: absolute;
      bottom: -9px;
      left: 50%;
      width: 10px;
      height: 5px;
      background: var(--primary-color);
      border-radius: 0 0 10px 10px;
      transform: translateX(-50%);
      /*border-left: 2px solid var(--primary-color);
      border-right: 2px solid var(--primary-color);
      border-bottom: 2px solid var(--primary-color);
      border-top: 2px solid var(--2323233-color);*/
      transition: 1s;
    }

    .up-container {
      display: none;
      position: absolute;
      margin: 10%;
      width: 80%;
      background: var(--232323-color);
      border-radius: 10px;
      color: var(--primary-color);
      font-size: 15px;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      transition: 1s;
      /* make the height scrollable */
      max-height: 80%;
      overflow-y: auto;
      /* add a scrollbar */
      scrollbar-width: thin;
      scrollbar-color: var(--primary-color) var(--bubble-color);
    }

    .up-container h2 {
      margin-top: 55px;
    }

    /* make a cross out of the up cross */
    .up-cross {
      display: block;
      position: absolute;
      width: 10px;
      height: 50px;
      right: 23px;
      top: 5px;
      background: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(45deg);
    }

    .up-cross::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 50px;
      background: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(90deg);
    }

    .i-container {
      display: none;
      position: absolute;
      margin: 10%;
      width: 80%;
      background: var(--232323-color);
      border-radius: 10px;
      color: var(--primary-color);
      font-size: 15px;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      transition: 1s;
      /* make the container have a max height with overflow hidden for the user to be able to scroll down*/
      max-height: 80%;
      overflow-y: auto;
      /* add a scrollbar */
      scrollbar-width: thin;
      scrollbar-color: var(--primary-color) var(--bubble-color);

    }

    .i-container h2 {
      margin-top: 55px;
    }

    /* make a cross out of the up cross */
    .i-cross {
      display: block;
      position: absolute;
      width: 10px;
      height: 50px;
      right: 23px;
      top: 5px;
      background: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(45deg);
    }

    .i-cross::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 50px;
      background: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(90deg);
    }

    .hilfe {
      display: none;
      width: 40%;
      position: absolute;
      left: 30%;
      top: 10%;
      border-radius: 10px;
      background: var(--232323-color);
      color: var(--primary-color);
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      font-size: 20px;
      transition: 1s;
    }

    .hilfe-cross {
      display: block;
      position: absolute;
      width: 5px;
      height: 30px;
      right: 23px;
      top: 5px;
      background-color: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(45deg);
    }

    .hilfe-cross::after {
      content: '';
      position: absolute;
      width: 5px;
      height: 30px;
      background-color: var(--primary-color);
      border-radius: 2px;
      transition: 1s;
      /* rotate 90 deg*/
      transform: rotate(90deg);
    }

    .hilfe-option {
      display: flex;
      background: var(--newc-color);
      border-radius: 10px;
      margin-top: 10px;
      padding: 3px;
      transition: 1s;
    }

    #hilfe-option1 {
      margin-top: 40px;
    }

    .plane::before,
    .plane::after {
        content: '';
        position: absolute;
        background-color: var(--plane-color);
        width: 57px;
        height: 20px;
        clip-path: polygon(0% 0%, 100% 50%, 0% 100%);
    }

    .plane::after {
        top: 13.5px;
        transform: rotate(-13deg);
    }
    .plane::before{
        transform: rotate(13deg);
    }
  </style>
</head>

<body>
  <div class="intro">
    <h1 class="logo-header">
      <span class="logo">A</span><span class="logo">I</span><span class="logo">l</span><span class="logo">u</span><span
        class="logo">r</span><span class="logo">y</span>
    </h1>
  </div>
  <script>
    let intro = document.querySelector('.intro');
    let logo = document.querySelector('.logo-header');
    let logoSpan = document.querySelectorAll('.logo');
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        logoSpan.forEach((span, idx) => {
          setTimeout(() => {
            span.classList.add('active');
          }, (idx + 1) * 200)
        })
        setTimeout(() => {
          logoSpan.forEach((span, idx) => {
            setTimeout(() => {
              span.classList.remove('active');
            }, (idx + 1) * 50)
          })
        }, 2000)
        setTimeout(() => {
          intro.style.top = '-100vh';
        }, 3000)
      })
    })
  </script>
  <div class="bell">
    <div class="bell-top"></div>
    <div class="bell-body"></div>
    <div class="bell-clapper"></div>
    <div class="redball"></div>
  </div>
  <div class="hilfe-knopf">
    <div class="hilfe-top"></div>
    <div class="hilfe-body"></div>
    <div class="hilfe-clapper"></div>
  </div>
  <div class="hilfe">
    <div class="hilfe-cross"></div>
    <div class="hilfe-option" id="hilfe-option1">op1</div>
    <div class="hilfe-option" id="hilfe-option2">op2</div>
    <div class="hilfe-option" id="hilfe-option3">op3</div>
    <div class="hilfe-option" id="hilfe-option4">op4</div>
    <h2 id="helptext">whats your problem?</h2>
  </div>
  <div class="info-box" id="info-box">
    Information steht hier
  </div>
  <div class="up-container">
    <div class="up-cross"></div>
    <h2 class="h21">Our new update offers notifications, a new game, navigation help and a new help
      function.<br><br>Notifications: a new bell has been added which you have probably already clicked to read
      this!<br><br>Game: you can for example ask AIlury: "I want to play the emoji game" and then you can play the emoji
      game! To play it you have to count the emojis from left to right until you get to the different one and then tell
      AIlury the position or you tell AIlury which one it is by sending the different emoji, if this is the right
      position or you sent the right emoji, AIlury will give you the next list of emojis! If you want to leave the game
      you can say for example: "I want to go back to the conversation". If you don't know the answer, just type: "idk",
      like in the other games!<br><br>Navigation help: when you click on certain elements on the sidebar you will be
      told what that element is or does. If this element is in the way, you can simply click on it to make it
      disappear.<br><br>Help: when you click on the help button, a small window opens on the screen with buttons, and
      depending on the problem you are having, you can click on the corresponding button.</h2>
  </div>
  <div class="i-container">
    <div class="i-cross"></div>
    <h2 class="h22">
      Instructions:<br><br>
      Buttons:<br>
      Notifications: when you click on the notification button, you will be shown information about the latest
      update.<br><br>
      Help: if you click on the help button, a small window will open on the screen with up to 4 buttons! If you have a
      problem, just click on the button that corresponds to your question, then the text under the buttons will change
      and tell you what you need to do to solve your problem on the website or will tell you what has been done to solve
      your problem.<br><br>
      log out: when you click the log out button you will be taken to your profile where you can upload a profile
      picture or change your name. To get back to the chat you have to click on the "Start" button, but by doing so you
      agree to the user guidelines and Privacy Policy!<br><br>
      speak: when you click the speak button, the chat will be read from that moment on. If you no longer want this, you
      can click it a second time.<br><br>
      theme: if you click on the light/dark theme button, the website will be either light or dark, depending on whether
      it is dark or light at the time of the click.<br><br>
      messages: if you click on any message you will be able to delete it or edit it, if its a message you
      wrote!<br><br>
      random: if you click on the random button, a random question or sentence will appear in the input
      field.<br><br><br>
      Functions: if you want to play an emoji game by guessing where or which emoji is different you can for example
      type: "I want to play the emoji game". Then AIlury will give you a list of emojis and you either have to count the
      emojis from left to right until you get to the different one and then send AIlury the number or you can send
      AIlury the different emoji! If you want to practice German, you can write for example: "I want to practice German"
      and then AIlury will give you words to translate! If you want to practice math you can write for example: "I want
      to practice math" and then AIlury will give you math exercises. If at any time you don't know the answer to a
      function, you can simply say: "idk".<br><br>
      Text filters and keywords: AIlury offers a lot of functions. You can use AIlury to replace text with text in a
      large or small text, for example: "replace I with you in I eat". Or you can ask if a text is in another text by
      saying for example: "is hello in hello how are you?". You can also remove one text from another by saying, for
      example: "take hello out of hello how are you?". You can also tell her to say something, for example by saying:
      "say: hello". You can also give Allury basic math problems to solve or ask if one number is greater than another
      by writing, for example: "is 20 > 21?" or see if one number is equal to another by saying, for example: "is 20 =
      20?". AIlury can also give you a Random name for either a specific person or in general, for example if you say:
      "what would be a good name for my dog?" Or "give me a female name". You can also ask AIlury to choose a number
      between two numbers you specify by saying, for example, "choose a number from 10 to 20". You can also ask AIlury
      to count to a desired number by saying, for example: "count till 100". These are not all the functions AIlury has
      to offer but a lot of them. These functions are not yet fully developed, they are still being
      improved.<br><br><br>
      i hope i was able to give you a good overview of what AIlury can do!
    </h2>
  </div>
  <div class="chat">
    <div class="container">
      <div class="user-profile" id="user-profile">
        <div>
          <img src="default_avatar.png" alt="User Avatar" id="user-avatar" class="user-avatar">
          <br>
          <br>
          <span id="username-display" class="username-display">Guest</span>
          <div class="smallscreenbtns">
            <a id="logout" href="index.html">log out</a>
            <button class="speakon" id="speakon">speak: off</button>
            <button class="bcft" onclick="change_mood()">Dark theme</button>
            <button class="RandomQuestion" onclick="setinputvalue()">Random</button>
          </div>
          <div class="bigscreenbtns">
            <br>
            <br>
            <a id="logout" href="index.html">log out</a>
            <br>
            <br>
            <a class="speakon" id="speakon">speak: off</a>
            <br>
            <br>
            <a class="changetheme" id="changetheme" onclick="change_mood()">Dark</a>
            <br>
            <br>
            <a class="RandomQuestion" onclick="setinputvalue()">Random</a>
          </div>
        </div>
      </div>
    </div>
    <div class="chat-container">
      <h1 id="einstellungen" onclick="showmenu()">#</h1>
      <div class="nav-links" id="navlinks">
        <ul>
          <li><a class="bcft2" style="color: var(--primary-color);" onclick="change_mood()">Dark</a></li>
          <br>
          <br>
          <li><a class="bcft2" style="color: var(--primary-color);" onclick="setinputvalue()">Random</a></li>
          <br>
          <br>
          <li><a class="bcft2" id="btn3" style="color: var(--primary-color);" onclick="helpbtn()">Help</a></li>
          <br>
          <br>
          <li><a class="bcft2" id="fontS" style="color: var(--primary-color);" onclick="showfonts()">Font size ></a>
          </li>
          <br>
          <br>
          <li><a class="bcft1" id="btnone" style="color: var(--primary-color);display: none;" onclick="font1()">big</a>
          </li>
          <br>
          <li><a class="bcft1" id="btnthree" style="color: var(--primary-color);display: none;"
              onclick="font3()">small</a></li>

        </ul>
      </div>

      <div class="chat-messages" id="chat-messages">
        <h2 id="nmy" style="text-align: center;color: var(--primary-color);">no messages yet<a
            id="inscructionlink">instructions</a></h2>
        <!-- nmy Hier werden die Chat-Nachrichten eingefügt -->
      </div>
      <button id="Breakbtn">Break</button>
      <button id="Löschbtn">Trash</button>
      <button id="Editbtn">Edit</button>
      <div class="chat-input">
        <input type="text" class="user-input" id="user-input" placeholder="Type your message...">
        <button id="button1" onclick="sendMassaga()"><div class="plane"></div></button>
        <button id="button2" onclick="newknowledge()">Teach</button>
        <button id="button3" onclick="learnnonewthing()">Skip</button>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const userProfile = document.getElementById("user-profile");
      const usernameDisplay = document.getElementById("username-display");
      const userAvatar = document.getElementById("user-avatar");


      // Load user profile from localStorage
      loadUserProfile();
      checkvalueoc();

      function loadUserProfile() {
        const savedUsername = localStorage.getItem("username");
        const savedAvatar = localStorage.getItem("avatar");

        if (savedUsername) {
          usernameDisplay.textContent = savedUsername;
        }

        if (savedAvatar) {
          userAvatar.src = savedAvatar;
        }
      }
    });

  </script>
  <script>
    const myInput = document.getElementById('user-input');
    if (myInput.value == '') {
      document.getElementById('button1').style.backgroundColor = "var(--232323-color)";
      document.getElementById('button2').style.backgroundColor = "var(--232323-color)";

    }
    if (myInput.value !== '') {
      document.getElementById('button1').style.backgroundColor = "var(--232323-color)";
      document.getElementById('button2').style.backgroundColor = "var(--232323-color)";
    }


    /*keydown*/
    myInput.addEventListener('keyup', () => {
      if (myInput.value !== '') {
        document.getElementById('button1').style.backgroundColor = "var(--676767-color)";
        document.getElementById('button2').style.backgroundColor = "var(--676767-color)";


      } else {
        document.getElementById('button1').style.backgroundColor = "var(--232323-color)";
        document.getElementById('button2').style.backgroundColor = "var(--232323-color)";


      }

    })
  </script>
  <h6 style="color: transparent;" id="remember"></h6>
  <h6 style="color: transparent;" id="bot-response"></h6>
  <h6 style="color: transparent;" id="idk">I dont know the answer. Please enter my answer to that question</h6>
  <script>
    let t1 = "do";
    let t2 = "do";
    let t3 = "do";
    let t4 = "do";
    let t5 = "do";
    let aotink = "0";
    let asktg = "no";
    let leicht1 = "";
    let leicht2 = "";
    let theoldanswer = "";
    let theoldanswer2 = "";
    let thequestion2 = "nothing";
    let theanswer2 = "nothing";
    let theoldmathanswer = "";
    let themathanswer = "";
    let themathquestion = "";
    let chalange = "nothing";
    let thequestion = "nothing";
    let theanswer = "nothing";
    let operator = "";
    let num1 = "";
    let num2 = "";
    let idnum = "0";
    let up_cross = document.querySelector('.up-cross');
    let up_container = document.querySelector('.up-container');
    let bell = document.querySelector('.bell');
    let bell_ball = document.querySelector('.redball');
    let hilfe_knopf = document.querySelector('.hilfe-knopf');
    let hilfe = document.querySelector('.hilfe');
    let hilfe_cross = document.querySelector('.hilfe-cross');
    let hilfeop1 = document.getElementById('hilfe-option1');
    let hilfeop2 = document.getElementById('hilfe-option2');
    let hilfeop3 = document.getElementById('hilfe-option3');
    let hilfeop4 = document.getElementById('hilfe-option4');
    let inputvaluefc = document.getElementById('user-input');
    let helptext = document.getElementById('helptext');
    let defaultchalange = "nothing";
    let isguessing = "no";
    let inscructionlink = document.getElementById('inscructionlink');
    let i_container = document.querySelector('.i-container');
    let i_cross = document.querySelector('.i-cross');
    function checkvalueoc() {
      defaultchalange = chalange;
      helptext.textContent = "whats your problem?";
      if (chalange == "nothing" && isguessing == "no") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "flex";
        hilfeop4.style.display = "flex";
        hilfeop1.textContent = "i want to play the emoji game!";
        hilfeop2.textContent = "i want to practice german!";
        hilfeop3.textContent = "i dont know how to start a conversation!";
        hilfeop4.textContent = "i want to practice math!";
      } if (chalange == "nothing" && isguessing == "nein") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "flex";
        hilfeop4.style.display = "flex";
        hilfeop1.textContent = "i want to play the emoji game!";
        hilfeop2.textContent = "i want to practice german!";
        hilfeop3.textContent = "i dont know how to start a conversation!";
        hilfeop4.textContent = "i want to practice math!";
      } else if (chalange == "german") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop1.textContent = "i dont know the answer!";
        hilfeop2.textContent = "i want to go back to the normal conversation!";
        hilfeop3.style.display = "none";
        hilfeop4.style.display = "none";
      } else if (chalange == "englisch") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "none";
        hilfeop4.style.display = "none";
        hilfeop1.textContent = "ich möchte zurück in die normale konversation!";
        hilfeop2.textContent = "ich weiss die antwort nicht!";
      } else if (chalange == "math") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "flex";
        hilfeop4.style.display = "flex";
        hilfeop1.textContent = "i dont know the answer!";
        hilfeop2.textContent = "its to hard!";
        hilfeop3.textContent = "i want to go back to the normal conversation!";
        hilfeop4.textContent = "its to easy!";
      } else if (chalange == "mathe") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "flex";
        hilfeop4.style.display = "flex";
        hilfeop1.textContent = "ich weiss die antwort nicht!";
        hilfeop2.textContent = "es ist zu schwer!";
        hilfeop3.textContent = "ich möchte zurück in die normale conversation!";
        hilfeop4.textContent = "es ist zu leicht!";
      } else if (chalange == "nothing" && isguessing == "yes") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop1.textContent = "i dont know the answer!";
        hilfeop2.textContent = "i want to go back to the normal conversation!";
        hilfeop3.style.display = "none";
        hilfeop4.style.display = "none";
      } else if (chalange == "nothing" && isguessing == "ja") {
        hilfeop1.style.display = "flex";
        hilfeop2.style.display = "flex";
        hilfeop3.style.display = "none";
        hilfeop4.style.display = "none";
        hilfeop1.textContent = "ich möchte zurück in die normale konversation!";
        hilfeop2.textContent = "ich weiss die antwort nicht!";
      }
    }
    hilfeop1.addEventListener("click", () => {
      if (hilfeop1.textContent == "i want to play the emoji game!") {
        inputvaluefc.value = "i want to play the emoji game";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop1.textContent == "i dont know the answer!") {
        inputvaluefc.value = "idk";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop1.textContent == "ich weiss die antwort nicht!") {
        inputvaluefc.value = "idk";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else if (hilfeop1.textContent == "ich möchte zurück in die normale conversation!") {
        inputvaluefc.value = "ich möchte zurück in den normalen chat";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else if (hilfeop1.textContent == "ich möchte zurück in die normale konversation!") {
        inputvaluefc.value = "ich möchte zurück in den normalen chat";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else {
        helptext.textContent = "im sorry but i can not help you with that";
      }
    });
    hilfeop2.addEventListener("click", () => {
      if (hilfeop2.textContent == "i want to practice german!") {
        inputvaluefc.value = "i want to practice german";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop2.textContent == "i want to go back to the normal conversation!") {
        inputvaluefc.value = "i want to go back to the normal chat";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop2.textContent == "ich weiss die antwort nicht!") {
        inputvaluefc.value = "idk";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else if (hilfeop2.textContent == "es ist zu schwer!") {
        leicht1 = "leicht";
        helptext.textContent = "du bist jetzt auf einfachen modus";
      } else if (hilfeop2.textContent == "its to hard!") {
        leicht2 = "easy";
        helptext.textContent = "its easy now!";
      } else {
        helptext.textContent = "im sorry but i can not help you with that";
      }
    });
    hilfeop3.addEventListener("click", () => {
      if (hilfeop3.textContent == "i dont know how to start a conversation!") {
        helptext.textContent = "just click the 'random' button";
      } else if (hilfeop3.textContent == "i want to go back to the normal conversation!") {
        inputvaluefc.value = "i want to go back to the normal chat";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop3.textContent == "ich möchte zurück in die normale conversation!") {
        inputvaluefc.value = "ich möchte zurück in den normalen chat";
        helptext.textContent = "sende einfach den text den ich in das eingabefeld gemacht habe";
      } else {
        helptext.textContent = "im sorry but i can not help you with that";
      }
    });
    hilfeop4.addEventListener("click", () => {
      if (hilfeop4.textContent == "i want to practice math!") {
        inputvaluefc.value = "i want to practice math";
        helptext.textContent = "just send what i entered in the input field";
      } else if (hilfeop4.textContent == "its to easy!") {
        leicht2 = "";
        helptext.textContent = "now its not in easy mode!";
      } else if (hilfeop4.textContent == "es ist zu leicht!") {
        leicht1 = "";
        helptext.textContent = "ich habe den einfachen modus deaktiviert!";
      } else {
        helptext.textContent = "im sorry but i can not help you with that";
      }
    });
    function clean() {
      aotink = "0";
      asktg = "no";
      leicht1 = "";
      leicht2 = "";
      operator = "";
      num1 = "";
      num2 = "";
      theoldanswer = "";
      theoldanswer2 = "";
      thequestion2 = "nothing";
      theanswer2 = "nothing";
      theoldmathanswer = "";
      themathanswer = "";
      themathquestion = "";
      thequestion = "nothing";
      theanswer = "nothing";
      checkvalueoc();
    }
    up_cross.addEventListener("click", () => {
      up_container.style.animation = "none";
      void up_container.offsetWidth;
      up_container.style.animation = "fadeOut 0.2s ease-out";
      setTimeout(function () {
        up_container.style.display = "none";
      }, 200);
    });
    i_cross.addEventListener("click", () => {
      i_container.style.animation = "none";
      void i_container.offsetWidth;
      i_container.style.animation = "fadeOut 0.2s ease-out";
      setTimeout(function () {
        i_container.style.display = "none";
      }, 200);
    });
    inscructionlink.addEventListener("click", () => {
      i_container.style.display = "flex";
      i_container.style.animation = "none";
      void i_container.offsetWidth;
      i_container.style.animation = "fadeIn 0.2s ease-out";
    });
    hilfe_cross.addEventListener("click", () => {
      helptext.textContent = "whats your problem?";
      hilfe.style.animation = "none";
      void hilfe.offsetWidth;
      hilfe.style.animation = "fadeOut 0.2s ease-out";
      setTimeout(function () {
        hilfe.style.display = "none";
      }, 200);
    });
    bell.addEventListener("click", () => {
      up_container.style.display = "flex";
      up_container.style.animation = "none";
      void up_container.offsetWidth;
      up_container.style.animation = "fadeIn 0.2s ease-out";
      bell_ball.style.animation = "none";
      void bell_ball.offsetWidth;
      bell_ball.style.animation = "fadeOut 0.2s ease-out";
      setTimeout(function () {
        bell_ball.style.display = "none";
      }, 200);
    });
    hilfe_knopf.addEventListener("click", () => {
      hilfe.style.display = "block";
      hilfe.style.animation = "none";
      void hilfe.offsetWidth;
      hilfe.style.animation = "fadeIn 0.2s ease-out";
    });
    // Function to handle message element click
    const allEmojis1 = ["😀", "😁", "😂", "🤣", "😃", "😄", "😅", "😆", "😉", "😊", "😋", "😎", "😍", "😘", "😗", "😙", "😚", "☺️", "🙂", "🤗", "🤩", "🤔", "🤨", "😐", "😑", "😶", "🙄", "😏", "😣", "😥", "😮", "🤐", "😯", "😪", "😫", "😴", "😌", "😛", "😜", "😝", "🤤", "😒", "😓", "😔", "😕", "🙃", "🤑", "😲", "☹️", "🙁", "😖", "😞", "😟", "😤", "😢", "😭", "😦", "😧", "😨", "😩", "🤯", "😬", "😰", "😱", "🥵", "🥶", "😳", "🤪", "😵", "😡", "😠", "🤬", "😷", "🤒", "🤕", "🤢", "🤮", "🤧", "😇", "🥳", "🥺", "🤠", "🤡", "🤥", "🤫", "🤭", "🧐", "🤓", "😈", "👿", "👹", "👺", "💀", "☠️", "👻", "👽", "👾", "🤖", "😺", "😸", "😹", "😻", "😼", "😽", "🙀", "😿", "😾"];
    const allEmojis2 = ["😀", "😁", "😃", "😄", "😆"];
    const allEmojis3 = ["😈", "👿"];
    const allEmojis4 = ["💀", "☠️", "👻"];
    const allEmojis5 = ["😺", "😸", "😹", "😻", "😼", "😽", "🙀", "😿", "😾"];
    const allEmojis6 = ["😨", "😰", "😱"];
    const allEmojis7 = ["🤑", "🤢", "🤮"];
    const allEmojis8 = ["😊", "😗", "😙", "😚", "☺️", "🙂", "🤗", "😳"];
    const allEmojis = [allEmojis2, allEmojis3, allEmojis4, allEmojis5, allEmojis6, allEmojis7, allEmojis8]

    let differentEmoji;
    let differentEmojiPosition;
    let theG;
    let otherEmojis;
    function getRandomEmoji() {
      checkvalueoc();
      let emojiG = allEmojis[Math.floor(Math.random() * allEmojis.length)];
      theG = emojiG;
      otherEmojis = emojiG[Math.floor(Math.random() * emojiG.length)];
      return otherEmojis;
    }
    function getRandomEmoji2() {
      return theG[Math.floor(Math.random() * theG.length)];
    }

    function generateEmojis() {
      const baseEmoji = getRandomEmoji();
      let returnobjekt = [];
      do {
        differentEmoji = getRandomEmoji2();
      } while (differentEmoji === baseEmoji);

      differentEmojiPosition = Math.floor(Math.random() * 40);
      for (let i = 0; i < 40; i++) {
        returnobjekt.push(i === differentEmojiPosition ? differentEmoji : baseEmoji);
      }
      return returnobjekt;
    }
    function checkGuess(input) {
      let returnthis = "";
      if (parseInt(input) - 1 === differentEmojiPosition) {
        returnthis = 'right';
      } else {
        returnthis = 'wrong';
      }
      return returnthis;
    }
    let ivif = document.getElementById('user-input');
    let button1 = document.getElementById('button1');
    let teach = document.getElementById('button2');
    let skip = document.getElementById('button3');
    ivif.addEventListener('keydown', () => {
      // Check if the Enter key is pressed
      if (event.key === 'Enter') {
        // click the send btn
        if (button1.style.display == "block") {
          button1.click();
        } else if (button1.style.display == "none") {
          teach.click();
        } else {
          skip.click();
        }
      }
    })
    function handleEditMessage(event) {
      const clickedElement = event.target;
      const backgroundColor = window.getComputedStyle(clickedElement).getPropertyValue('background-color').toLowerCase();
      if (clickedElement.classList.contains('sent')) {
        if (clickedElement.style.border == '2px solid var(--primary-color)') {
          clickedElement.style.border = 'none';
        } else {
          clickedElement.style.border = '2px solid var(--primary-color)';
        }
        const messageContent = clickedElement.textContent;
        const messageID = clickedElement.dataset.id;
        const löschbtn = document.getElementById('Löschbtn');
        const editbtn = document.getElementById('Editbtn');
        const Breakbtn = document.getElementById('Breakbtn');
        löschbtn.style.display = 'block';
        löschbtn.addEventListener('click', () => {
          if (clickedElement.style.border == '2px solid var(--primary-color)') {
            clickedElement.remove();
            löschbtn.style.display = 'none';
            editbtn.style.display = 'none';
            Breakbtn.style.display = 'none';
            clickedElement.style.border = 'none';
          }
        });
        editbtn.style.display = 'block';
        editbtn.addEventListener('click', () => {
          if (clickedElement.style.border == '2px solid var(--primary-color)') {
            const inputElement = document.createElement('input');
            inputElement.type = 'text';
            inputElement.value = messageContent;

            // Replace the text content with an input field for editing
            clickedElement.textContent = '';
            clickedElement.appendChild(inputElement);
            let theId = clickedElement.id;

            inputElement.focus();

            // Add event listener to save the edited message on input blur
            inputElement.addEventListener('blur', function () {
              saveEditedMessage(clickedElement, inputElement);
            });
            löschbtn.style.display = 'none';
            editbtn.style.display = 'none';
            Breakbtn.style.display = 'none';

            //for each clickedElement border = 'none' 
            for (const element of document.querySelectorAll('.sent')) {
              element.style.border = 'none';
              if (parseInt(element.id) > parseInt(theId)) {
                //remove element dataset id
                element.remove();
              }
            }
            for (const element2 of document.querySelectorAll('.received')) {
              element2.style.border = 'none';
              if (parseInt(element2.id) > parseInt(theId)) {
                //remove element dataset id
                element2.remove();
              }
            }
          }
        });
        Breakbtn.style.display = 'block';
        Breakbtn.addEventListener('click', () => {
          löschbtn.style.display = 'none';
          editbtn.style.display = 'none';
          Breakbtn.style.display = 'none';
          clickedElement.style.border = 'none';
        });
        if (clickedElement.style.border == '2px solid var(--primary-color)') {
          clickedElement.style.border = '2px solid var(--primary-color)';
          löschbtn.style.display = 'block';
          editbtn.style.display = 'block';
          Breakbtn.style.display = 'block';
        } else {
          clickedElement.style.border = 'none';
        }
      } else {
        if (clickedElement.style.border == '2px solid var(--primary-color)') {
          clickedElement.style.border = 'none';
        } else {
          clickedElement.style.border = '2px solid var(--primary-color)';
        }
        const messageContent = clickedElement.textContent;
        const messageID = clickedElement.dataset.id;
        const löschbtn = document.getElementById('Löschbtn');
        const editbtn = document.getElementById('Editbtn');
        const Breakbtn = document.getElementById('Breakbtn');
        löschbtn.style.display = 'block';
        löschbtn.addEventListener('click', () => {
          if (clickedElement.style.border == '2px solid var(--primary-color)') {
            clickedElement.remove();
            löschbtn.style.display = 'none';
            editbtn.style.display = 'none';
            Breakbtn.style.display = 'none';
            clickedElement.style.border = 'none';
          }
        });
        editbtn.style.display = 'none';
        Breakbtn.style.display = 'block';
        Breakbtn.addEventListener('click', () => {
          löschbtn.style.display = 'none';
          editbtn.style.display = 'none';
          Breakbtn.style.display = 'none';
          clickedElement.style.border = 'none';
        });
        if (clickedElement.style.border == '2px solid var(--primary-color)') {
          clickedElement.style.border = '2px solid var(--primary-color)';
          löschbtn.style.display = 'block';
          editbtn.style.display = 'none';
          Breakbtn.style.display = 'block';
        } else {
          clickedElement.style.border = 'none';
        }
      }
    }

    function saveEditedMessage(messageElement, inputElement) {
      const editedMessage = inputElement.value;

      messageElement.textContent = editedMessage;
      if (editedMessage !== '') {
        // Simulierte Antwort vom Bot
        getBotResponse(editedMessage)
          .then(response => {

            setTimeout(addMessage, 500, response, 'received')
            document.getElementById('bot-response').textContent = response;
            // Hier wird der Wert des <h1>-Elements aktualisiert
            // Scrollen zum Ende der Chat-Nachrichten
            var chatMessages = document.getElementById('chat-messages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
          })
          .catch(error => console.error('Bot response error:', error));
      }
    }
    document.addEventListener('click', function (event) {
      const clickedElement = event.target;
      const instructionbox = document.getElementById('info-box');
      const ccontainer = document.querySelector('chat-container');

      if (clickedElement.classList.contains('message')) {
        console.log('Nachricht angeklickt!');
        handleEditMessage(event);
        // Hier können Sie weitere Aktionen ausführen, die beim Klicken einer Nachricht durchgeführt werden sollen
      }
      // check if the style of the page is on max-width 750px or on min-width 750px
      if (clickedElement.classList.contains('speakon') && t1 == "do" && !window.matchMedia('(max-width: 750px)').matches) {
        t1 = "dont";
        instructionbox.style.display = 'block';
        instructionbox.style.opactiy = '0';
        instructionbox.style.marginTop = '280px';
        instructionbox.style.marginLeft = '3%';
        instructionbox.textContent = 'if you click the speak button you can make the bot read the chat or not';
        instructionbox.style.animation = "none";
        void instructionbox.offsetWidth;
        instructionbox.style.animation = "fadeIn 0.2s ease-in";
        setTimeout(function () {
          instructionbox.style.animation = "none";
          void instructionbox.offsetWidth;
          instructionbox.style.animation = "fadeOut 0.2s ease-out";
          setTimeout(function () {
            instructionbox.style.display = "none";
          }, 200);
        }, 5000);
      }
      if (clickedElement.classList.contains('changetheme') && t2 == "do") {
        t2 = "dont";
        instructionbox.style.display = 'block';
        instructionbox.style.marginTop = '380px';
        instructionbox.style.marginLeft = '3%';
        instructionbox.textContent = 'you can change the theme with this button';
        instructionbox.style.animation = "none";
        void instructionbox.offsetWidth;
        instructionbox.style.animation = "fadeIn 0.2s ease-out";
        setTimeout(function () {
          instructionbox.style.animation = "none";
          void instructionbox.offsetWidth;
          instructionbox.style.animation = "fadeOut 0.2s ease-out";
          setTimeout(function () {
            instructionbox.style.display = "none";
          }, 200);
        }, 5000);
      }
      if (clickedElement.classList.contains('RandomQuestion') && t3 == "do" && !window.matchMedia('(max-width: 750px)').matches) {
        t3 = "dont";
        instructionbox.style.display = 'block';
        instructionbox.style.marginTop = '430px';
        instructionbox.style.marginLeft = '3%';
        instructionbox.textContent = 'click this button if you do not know how to start a conversation';
        instructionbox.style.animation = "none";
        void instructionbox.offsetWidth;
        instructionbox.style.animation = "fadeIn 0.2s ease-out";
        setTimeout(function () {
          instructionbox.style.animation = "none";
          void instructionbox.offsetWidth;
          instructionbox.style.animation = "fadeOut 0.2s ease-out";
          setTimeout(function () {
            instructionbox.style.display = "none";
          }, 200);
        }, 5000);
      }
      if (clickedElement.classList.contains('info-box')) {
        instructionbox.style.display = "block";
        instructionbox.style.animation = "none";
        void instructionbox.offsetWidth;
        instructionbox.style.animation = "fadeOut 0.2s ease-out";
        setTimeout(function () {
          instructionbox.style.display = "none";
        }, 200);
      }
      if (clickedElement.classList.contains('speakon') && t1 == "do" && !window.matchMedia('(min-width: 750px)').matches) {
        t1 = "dont";
        instructionbox.style.display = 'block';
        instructionbox.style.marginTop = '30px';
        instructionbox.style.marginLeft = '17%';
        instructionbox.textContent = 'if you click the speak button you can make the bot read the chat or not';
        instructionbox.style.animation = "none";
        void instructionbox.offsetWidth;
        instructionbox.style.animation = "fadeIn 0.2s ease-out";
        setTimeout(function () {
          instructionbox.style.animation = "none";
          void instructionbox.offsetWidth;
          instructionbox.style.animation = "fadeOut 0.2s ease-out";
          setTimeout(function () {
            instructionbox.style.display = "none";
          }, 200);
        }, 5000);
      }
      if (clickedElement.classList.contains('bcft') && t2 == "do") {
        t2 = "dont";
        instructionbox.style.display = 'block';
        instructionbox.style.marginTop = '40px';
        instructionbox.style.marginLeft = '40%';
        instructionbox.textContent = 'you can change the theme with this button';
        instructionbox.style.animation = "none";
        void instructionbox.offsetWidth;
        instructionbox.style.animation = "fadeIn 0.2s ease-out";
        setTimeout(function () {
          instructionbox.style.animation = "none";
          void instructionbox.offsetWidth;
          instructionbox.style.animation = "fadeOut 0.2s ease-out";
          setTimeout(function () {
            instructionbox.style.display = "none";
          }, 200);
        }, 5000);
      }
      if (clickedElement.classList.contains('RandomQuestion') && t3 == "do" && !window.matchMedia('(min-width: 750px)').matches) {
        t3 = "dont";
        instructionbox.style.display = 'block';
        instructionbox.style.marginTop = '32px';
        instructionbox.style.marginLeft = '65%';
        instructionbox.textContent = 'click this button if you do not know how to start a conversation';
        instructionbox.style.animation = "none";
        void instructionbox.offsetWidth;
        instructionbox.style.animation = "fadeIn 0.2s ease-out";
        setTimeout(function () {
          instructionbox.style.animation = "none";
          void instructionbox.offsetWidth;
          instructionbox.style.animation = "fadeOut 0.2s ease-out";
          setTimeout(function () {
            instructionbox.style.display = "none";
          }, 200);
        }, 5000);
      }
      if (clickedElement.classList.contains('user-avatar') && t4 == "do" && !window.matchMedia('(max-width: 750px)').matches) {
        t4 = "dont";
        instructionbox.style.display = 'block';
        instructionbox.style.marginTop = '2px';
        instructionbox.style.marginLeft = '3%';
        instructionbox.textContent = 'your profile picture is here, if you uploaded one!';
        instructionbox.style.animation = "none";
        void instructionbox.offsetWidth;
        instructionbox.style.animation = "fadeIn 0.2s ease-out";
        setTimeout(function () {
          instructionbox.style.animation = "none";
          void instructionbox.offsetWidth;
          instructionbox.style.animation = "fadeOut 0.2s ease-out";
          setTimeout(function () {
            instructionbox.style.display = "none";
          }, 200);
        }, 5000);
      }
      if (clickedElement.classList.contains('username-display') && t5 == "do" && !window.matchMedia('(max-width: 750px)').matches) {
        t5 = "dont";
        instructionbox.style.display = 'block';
        instructionbox.style.marginTop = '130px';
        instructionbox.style.marginLeft = '3%';
        instructionbox.textContent = 'your user-name is here, if you have one!';
        instructionbox.style.animation = "none";
        void instructionbox.offsetWidth;
        instructionbox.style.animation = "fadeIn 0.2s ease-out";
        setTimeout(function () {
          instructionbox.style.animation = "none";
          void instructionbox.offsetWidth;
          instructionbox.style.animation = "fadeOut 0.2s ease-out";
          setTimeout(function () {
            instructionbox.style.display = "none";
          }, 200);
        }, 5000);
      }
      if (clickedElement.classList.contains('username-display') && t5 == "do" && !window.matchMedia('(min-width: 750px)').matches) {
        t5 = "dont";
        instructionbox.style.display = 'block';
        instructionbox.style.marginTop = '4px';
        instructionbox.style.marginLeft = '1%';
        instructionbox.textContent = 'your user-name is here, if you have one!';
        instructionbox.style.animation = "none";
        void instructionbox.offsetWidth;
        instructionbox.style.animation = "fadeIn 0.2s ease-out";
        setTimeout(function () {
          instructionbox.style.animation = "none";
          void instructionbox.offsetWidth;
          instructionbox.style.animation = "fadeOut 0.2s ease-out";
          setTimeout(function () {
            instructionbox.style.display = "none";
          }, 200);
        }, 5000);
      }
    });
    const messageElements = document.querySelectorAll('.message');
    messageElements.forEach(messageElement => {
      messageElement.addEventListener('click', handleEditMessage);
    });
    // real v
    function sendMassaga() {
      document.getElementById('button1').style.backgroundColor = "var(--232323-color)";
      document.getElementById('button2').style.backgroundColor = "var(--232323-color)";
      document.getElementById("remember").textContent = document.getElementById("user-input").value;
      document.getElementById("nmy").style.display = "none";
      let button1 = document.querySelector(".plane");
      button1.style.animation = "none";
      void button1.offsetWidth;
      button1.style.animation = "sendAnimation 1s ease-out";
      //say();


      setTimeout(sendMessage, 100);
    }

    function sendMessage() {
      var userInput = document.getElementById('user-input');
      var userMessage = userInput.value.trim();
      if (userMessage !== '') {
        addMessage(userMessage, 'sent');

        // Simulierte Antwort vom Bot
        getBotResponse(userMessage)
          .then(response => {

            setTimeout(addMessage, 500, response, 'received')
            document.getElementById('bot-response').textContent = response;
            // Hier wird der Wert des <h1>-Elements aktualisiert
            // Scrollen zum Ende der Chat-Nachrichten
            var chatMessages = document.getElementById('chat-messages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
          })
          .catch(error => console.error('Bot response error:', error));

        userInput.value = '';



      }
    }


    /*function getBotResponse(userMessage) {
        return fetch('/process_input', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ user_input: userMessage })
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(response => {
            if (response.message.indexOf("I dont know the answer. Please enter my answer to that question") !== -1) {
              learnnewthing();
            }
            else if (response.message.indexOf("Sorry but i dont know your Name") !== -1) {
              let name = document.getElementById("username-display");
              return name.textContent;
            }
            else if (response.message.indexOf("Yes (Username)") !== -1) {
              let name = document.getElementById("username-display");
              let text = "yes " + name.textContent;
              return text;
            }
            else if (response.message.indexOf("hello (Username)") !== -1) {
              let name = document.getElementById("username-display");
              let text = "hello " + name.textContent;
              return text;
            }
            else if (response.message.indexOf("(Username)") !== -1) {
              let name = document.getElementById("username-display");
              let text = name.textContent;
              return text;
            }
            else if (response.message.indexOf("hallo (Username)") !== -1) {
              let name = document.getElementById("username-display");
              let text = "hallo " + name.textContent;
              return text;
            }
            return response.message;

        })
        .catch(error => {
            console.error('Error fetching bot response:', error);
            return 'Sorry, I encountered an error. Please try again.';
        });
    }*/
    async function loadKnowledgeBase(filePath) {
      const response = await fetch(filePath);
      const data = await response.json();
      return data;
    }

    // Funktion zum Speichern der Wissensbasis in einer JSON-Datei (nicht im reinen Browser-JavaScript möglich)

    // Funktion zur besten Übereinstimmung
    function findBestMatch(userQuestion, questions) {
      // Simulierte Funktion für Übereinstimmungsvergleich
      let bestMatch = null;
      let bestScore = 0.7; // Beispielschwellenwert
      questions.forEach(question => {
        let score = similarity(userQuestion, question); // similarity() muss implementiert werden
        if (score > bestScore) {
          bestMatch = question;
        }
      });
      return bestMatch;
    }
    function findBestMatch2(userQuestion, questions) {
      // Simulierte Funktion für Übereinstimmungsvergleich
      let bestMatch = null;
      let bestScore = 0.7; // Beispielschwellenwert
      questions.forEach(question => {
        // similarity() muss implementiert werden
        // take "!?.," out of the user question
        let filterdUserQ = userQuestion.replace(/[.,!?]/g, "");

        if (question.includes(filterdUserQ)) {
          bestMatch = question;
        }
      });
      return bestMatch;
    }

    // Funktion zur Berechnung der Ähnlichkeit (eine einfache Implementierung)
    function similarity(str1, str2) {
      const words1 = str1.split(' ');
      const words2 = str2.split(' ');
      const commonWords = words1.filter(word => words2.includes(word));
      return commonWords.length / Math.max(words1.length, words2.length);
    }
    function similarity2(str1, str2) {
      const words1 = str1.split(' ');
      const words2 = str2.split(' ');
      const commonWords = words1.filter(word => words2.includes(word));
      return commonWords.length / Math.max(words1.length, words2.length);
    }
    // Funktion zum Abrufen der Antwort für eine Frage
    function getAnswerForQuestion(question, knowledgeBase) {
      for (let q of knowledgeBase.questions) {
        if (q.question === question) {
          return q.answer;
        }
      }
      return null;
    }
    let Mnamen = ["Mia", "Laura", "Lara", "Lina", "Lisa", "Jana", "Lena", "Selena", "Sophia", "Emma", "Maja", "Lea", "Tina", "Helena", "Anna", "Sarah", "Maria", "Anna", "Sophie", "Emily", "Maya", "Melina", "Alice", "Olivia", "Isabella", "Ava", "Charlotte", "Cristina", "Laura", "Anne", "Julia", "Klara", "Bella", "Theresia", "Andrea", "Sofia", "Elena", "Nina", "Nicole", "Amelie", "Leane", "Elia", "Nya", "Naya", "Nora", "Sabrina", "Sabine", "Angelika", "Vanda", "Melinda", "Viktoria", "Liv", "Livia", "Liviana", "Matilda", "Victoria", "Fransiska"];

    // Männliche Namen
    let Jnamen = ["Elias", "Jonas", "Jakob", "Johannes", "Johann", "Karl", "Kevin", "Linus", "Max", "Maximus", "Maximilian", "Moritz", "Moritz", "Moritz", "Moritz", "Paulo", "Paul", "Fritz", "Anton", "Franz", "Andre", "Andreas", "Peter", "Louis", "Leo", "Lukas", "Holger", "Jonathan", "Willi", "William", "Wilhelm", "Willy", "Viktor", "Victor", "Marcus", "Markus", "Marko", "Mark", "Michael", "Martin", "Kai", "Aleksander", "Alexander", "Alex", "Werner", "Otto", "Uwe", "Ulrich", "Uli", "Bernd", "Bernhard", "Igor", "Ivan", "Ivo", "Sven", "Stefan", "Hans", "Henrik", "Henry", "Herbert", "Herman", "Heinrich"];

    // Array mit beiden Namenstypen
    let Anamen = [Mnamen, Jnamen];
    let MMnamen = ["Mia", "laura", "Lara", "Lina", "Lisa", "Jenna", "Lena", "Selena", "Sophia", "Emma", "Skylor", "Lea", "Tina", "Dora", "Anna", "Sarah", "Maria", "Sophie", "Emily", "Melina", "Alice", "Olivia", "Isabella", "Ava", "Isabell", "Cristina", "Laura", "Julia", "Bella", "Theresa", "Andrea", "Sofia", "Elena", "Nina", "Nicole", "Elia", "Nya", "Naya", "Nora", "Sabrina", "Angelika", "Vanda", "Viktoria", "Liv", "Livia", "Liviana", "Matilda", "Victoria", "Carmen", "Fransiska"];

    // Männliche Namen
    let JJnamen = ["Elias", "Cole", "Kevin", "Zane", "Max", "Maximus", "Maximilian", "Paulo", "Paul", "Andre", "Peter", "Louis", "Leo", "Lukas", "Jonathan", "Willi", "William", "Willy", "Viktor", "Victor", "Marcus", "Markus", "Marko", "Mark", "Michael", "Martin", "Kai", "Aleksander", "Alexander", "Alex", "Igor", "Ivan", "Sven", "Henrik", "Henry", "Robert", "Jimmy", "Cris"];

    // Array mit beiden Namenstypen
    let AAnamen = [MMnamen, JJnamen];
    // Funktion zur Verarbeitung der Benutzereingabe
    let tasks = [];
    let tasks2 = [];
    let currentAnswer = '';
    function containsNumbers(strtc) {
      // Regulärer Ausdruck, um zu überprüfen, ob der String Zahlen enthält
      const regex = /\d/;
      return regex.test(strtc);
    }
    async function loadTasks() {
      try {
        const task1 = await fetch('tasks.json');
        if (!task1.ok) {
          throw new Error('Network response was not ok');
        }
        tasks = await task1.json();
      } catch (error) {
        console.error('Error loading tasks:', error);
        return 'Error loading tasks';
      }
    }
    async function loadTasks2() {
      try {
        const task1 = await fetch('tasks2.json');
        if (!task1.ok) {
          throw new Error('Network response was not ok');
        }
        tasks2 = await task1.json();
      } catch (error) {
        console.error('Error loading tasks:', error);
        return 'Error loading tasks';
      }
    }

    function loadRandomTask() {
      if (tasks.length === 0) {
        return 'No tasks available';
      }
      const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
      thequestion = randomTask.Frage;
      return thequestion;
      theanswer = randomTask.Antwort;
    }

    function checkAnswer(userMessage) {
      if (userMessage === theanswer) {
        return 'Richtig! Eine neue Aufgabe wird geladen.';
        loadRandomTask();
        document.getElementById('answer').value = '';
      } else {
        return 'Falsch! Versuchen Sie es erneut.';
      }
    }
    function kuerzeBenutzernamen(langerBenutzername) {
      var gekuerzterName;
      if (langerBenutzername.length > 8) {
        gekuerzterName = langerBenutzername.substring(0, 8) + "…";
      } else {
        gekuerzterName = langerBenutzername;
      }
      localStorage.setItem("username", gekuerzterName);
      document.getElementById("username-display").textContent = gekuerzterName;
    }
    async function getBotResponse(userMessage) {
      try {
        if (chalange == "nothing") {
          const userQuestion = userMessage.toLowerCase();
          const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
          const questions = knowledgeBase.questions.map(q => q.question);
          const bestMatch = findBestMatch(userQuestion, questions);

          let response;
          if (userQuestion.includes('√')) {
            let zahlen = userQuestion.match(/\b\d+\b/g);
            if (zahlen.length !== 1) {
              return 'hm?';
            } else {
              let number = parseInt(zahlen[0]);
              let ergebnis = Math.sqrt(number);
              return `√${number} = ${ergebnis}.`;
            }
          } else if (userQuestion.includes("ich heisse")) {
            let name1 = userQuestion.split("ich heisse")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " ist ein schöner Name";
          } else if (userQuestion.includes("ich heiße")) {
            let name1 = userQuestion.split("ich heiße")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " ist ein schöner Name";
          } else if (userQuestion.includes("my name is ")) {
            let name1 = userQuestion.split("my name is ")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " is a nice name";
          } else if (userQuestion.includes("i am called ")) {
            let name1 = userQuestion.split("i am called ")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " is a nice name";
          } else if (userQuestion.includes("im called ")) {
            let name1 = userQuestion.split("im called ")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " is a nice name";
          } else if (userQuestion.includes("mein name ist ")) {
            let name1 = userQuestion.split("mein name ist ")[1];
            let name = name1.replace("?", "");
            kuerzeBenutzernamen(name);
            return name + " ist ein schöner Name";
          } else if (isguessing == "ja" && userQuestion.includes("emoji") && userQuestion.includes("spiel") && userQuestion.includes("spielen") && userQuestion.includes("nicht")) {
            isguessing = "nein";
            checkvalueoc();
            return "okay, du spiels nun kein emoji spiel mehr!";
          } else if (isguessing == "yes" && userQuestion.includes("emoji") && userQuestion.includes("play") && userQuestion.includes("game") && userQuestion.includes("not")) {
            isguessing = "no";
            checkvalueoc();
            return "you are not playing an emoji game anymore!";
          } else if (isguessing == "ja" && userQuestion.includes("nicht") && userQuestion.includes("emoji") && userQuestion.includes("spielen")) {
            isguessing = "nein";
            checkvalueoc();
            return "okay, du spiels nun kein emoji spiel mehr!";
          } else if (isguessing == "yes" && userQuestion.includes("emoji") && userQuestion.includes("not") && userQuestion.includes("play")) {
            isguessing = "no";
            checkvalueoc();
            return "you are not playing an emoji game anymore!";
          } else if (isguessing == "ja" && userQuestion.includes("zurück")) {
            isguessing = "nein";
            checkvalueoc();
            return "okay, du spiels nun kein emoji spiel mehr!";
          } else if (isguessing == "yes" && userQuestion.includes("emoji") && userQuestion.includes("play") && userQuestion.includes("don") && userQuestion.includes("t")) {
            isguessing = "no";
            checkvalueoc();
            return "you are not playing an emoji game anymore!";
          } else if (isguessing == "yes" && userQuestion.includes("back")) {
            isguessing = "no";
            checkvalueoc();
            return "you are not playing an emoji game anymore!";
          } else if (userQuestion.includes("emoji") && userQuestion.includes("spiel") && userQuestion.includes("spielen") && !userQuestion.includes("nicht")) {
            isguessing = "ja";
            let returnthegame = generateEmojis();
            return "sag mir an welcher stelle ein anderer emoji ist oder sende mir den unterschiedlichen emoji " + returnthegame;
          } else if (userQuestion.includes("emoji") && userQuestion.includes("play") && userQuestion.includes("game") && !userQuestion.includes("not")) {
            isguessing = "yes";
            let returnthegame = generateEmojis();
            return "tell me in which position you see the other emoji or send me the different emoji " + returnthegame;
          } else if (isguessing == "ja" && !userQuestion.includes("idk")) {
            let userQuestionForCheckGuess = userQuestion.match(/\d+/g);
            let checkanswer = checkGuess(userQuestionForCheckGuess);
            if (checkanswer == "right") {
              let returnthegame = generateEmojis();
              return "super! sag mir an welcher stelle ein anderer emoji ist oder sende mir den unterschiedlichen emoji " + returnthegame;
            } else if (userQuestion.includes(differentEmoji) && !userQuestion.includes(otherEmojis)) {
              let returnthegame = generateEmojis();
              return "super! sag mir an welcher stelle ein anderer emoji ist oder sende mir den unterschiedlichen emoji " + returnthegame;
            } else {
              return "falsch versuche es nochmal";
            }
          } else if (isguessing == "yes" && !userQuestion.includes("idk")) {
            let userQuestionForCheckGuess = userQuestion.match(/\d+/g);
            let checkanswer = checkGuess(userQuestionForCheckGuess);
            if (checkanswer == "right") {
              let returnthegame = generateEmojis();
              return "great! tell me in which position you see the other emoji or send me the different emoji " + returnthegame;
            } else if (userQuestion.includes(differentEmoji) && !userQuestion.includes(otherEmojis)) {
              let returnthegame = generateEmojis();
              return "great! tell me in which position you see the other emoji or send me the different emoji " + returnthegame;
            } else {
              return "wrong, try again";
            }
          } else if (isguessing == "yes" && userQuestion.includes("idk")) {
            let rightanswerforgame1 = parseInt(differentEmojiPosition) + 1;
            let returnthegame = generateEmojis();
            return "the right answer is " + rightanswerforgame1 + "! tell me in which position you see the other emoji or send me the different emoji " + returnthegame;
          } else if (isguessing == "ja" && userQuestion.includes("idk")) {
            let rightanswerforgame1 = parseInt(differentEmojiPosition) + 1;
            let returnthegame = generateEmojis();
            return "die richtige antwort ist " + rightanswerforgame1 + "! sag mir an welcher stelle ein anderer emoji ist oder sende mir den unterschiedlichen emoji " + returnthegame;
          } else if (userQuestion.includes('=')) {
            let zahlen = userQuestion.match(/\b\d+\b/g);
            if (zahlen.length !== 2) {
              return 'sorry but i didnt find a mathematical operation';
            } else {
              let [question, answer] = zahlen;
              let ergebnis1 = parseInt(question);
              let ergebnis2 = parseInt(answer);
              if (ergebnis1 === ergebnis2) {
                return `${question} = ${answer} = True`;
              } else {
                return `${question} = ${answer} = False.`;
              }
            }
          } else if (userQuestion.includes('>')) {
            let zahlen = userQuestion.match(/\b\d+\b/g);
            if (zahlen.length !== 2) {
              return 'sorry but i didnt find a mathematical operation';
            } else {
              let [question, answer] = zahlen;
              let ergebnis1 = parseInt(question);
              let ergebnis2 = parseInt(answer);
              if (ergebnis1 === ergebnis2) {
                return `${question} = ${answer}`;
              } else if (ergebnis1 > ergebnis2) {
                return `${question} > ${answer} = True`;
              } else {
                return `${question} > ${answer} = False.`;
              }
            }
          } else if (userQuestion.includes('<')) {
            let zahlen = userQuestion.match(/\b\d+\b/g);
            if (zahlen.length !== 2) {
              return 'sorry but i didnt find a mathematical operation';
            } else {
              let [question, answer] = zahlen;
              let ergebnis1 = parseInt(question);
              let ergebnis2 = parseInt(answer);
              if (ergebnis1 === ergebnis2) {
                return `${question} = ${answer}`;
              } else if (ergebnis1 < ergebnis2) {
                return `${question} < ${answer} = True`;
              } else {
                return `${question} < ${answer} = False.`;
              }
            }
          } else if (userQuestion.includes('how can i spell')) {
            let [trashword, word] = userQuestion.split("how can i spell", 2).map(str => str.trim());
            word = word.replace(':', '');
            word = word.trim();
            // , hier
            word = word.split('').join(',');
            return `${word}`;
          } else if (userQuestion.includes('how do i spell')) {
            let [trashword, word] = userQuestion.split("how do i spell", 2).map(str => str.trim());
            word = word.replace(':', '');
            word = word.trim();
            // , hier
            word = word.split('').join(',');
            return `${word}`;
          } else if (userQuestion.includes('wie buchstabiere ich')) {
            let [trashword, word] = userQuestion.split("wie buchstabiere ich", 2).map(str => str.trim());
            word = word.replace(':', '');
            word = word.trim();
            // , hier
            word = word.split('').join(',');
            return `${word}`;
          } else if (userQuestion.includes('wie buchstabiert man')) {
            let [trashword, word] = userQuestion.split("wie buchstabiert man", 2).map(str => str.trim());
            word = word.replace(':', '');
            word = word.trim();
            // , hier
            word = word.split('').join(',');
            return `${word}`;
          } else if (userQuestion.includes('is ') && userQuestion.includes(' in ')) {
            let userR = userQuestion.trim();
            userR = userR.replace("?", "");
            // Ersetzung durchführen und das Ergebnis zuweisen
            if (userR.includes(' in ')) {
              let [userS1, userS2] = userR.split("in", 2).map(str => str.trim());
              userS1 = userS1.trim();
              userS2 = userS2.trim();
              userS1 = userS1.replace(/“/g, '');
              userS1 = userS1.replace(/„/g, '');
              userS1 = userS1.replace('is ', '');
              let nimm_keyword = userS1.split(" ")[0]; // Trenne das erste Wort vom Rest des Satzes
              // Entferne das Wort aus userS1 aus userS2
              if (userS2.includes(userS1)) {
                return `yes, "${userS1}" is in "${userS2}"`;
              } else {
                return `no, "${userS1}" is not in "${userS2}"`;
              }
            }
          } else if (userQuestion.includes('ist ') && userQuestion.includes(' in ')) {
            let userR = userQuestion.trim();
            userR = userR.replace("?", "");
            // Ersetzung durchführen und das Ergebnis zuweisen
            if (userR.includes(' in ')) {
              let [userS1, userS2] = userR.split("in", 2).map(str => str.trim());
              userS1 = userS1.trim();
              userS2 = userS2.trim();
              userS1 = userS1.replace(/“/g, '');
              userS1 = userS1.replace(/„/g, '');
              userS1 = userS1.replace('ist ', '');
              let nimm_keyword = userS1.split(" ")[0]; // Trenne das erste Wort vom Rest des Satzes
              // Entferne das Wort aus userS1 aus userS2
              if (userS2.includes(userS1)) {
                return `ja, "${userS1}" ist in "${userS2}"`;
              } else {
                return `nein, "${userS1}" ist nicht in "${userS2}"`;
              }
            }
          } else if (userQuestion.includes('take') && userQuestion.includes('out of')) {
            let userR = userQuestion.trim();
            if (userR.includes('out of')) {
              let [userS1, userS2] = userR.split("out of", 2).map(str => str.trim());
              let nimm_keyword = userS1.split(" ")[0]; // Trenne das erste Wort vom Rest des Satzes
              userS1 = userS1.replace(nimm_keyword, "").trim();
              let userRS = userS2.replace(userS1, "").trim(); // Entferne das Wort aus userS1 aus userS2
              return `Okay, "${userS1}" out of "${userS2}" is "${userRS}".`;
            } else {
              return 'sorry but i cant answer to that';
            }
          } else if (userQuestion.includes('nimm') && userQuestion.includes('aus')) {
            let userR = userQuestion.trim();
            userR = userR.replace("heraus", "");
            // Ersetzung durchführen und das Ergebnis zuweisen
            if (userR.includes('aus')) {
              let [userS1, userS2] = userR.split("aus", 2).map(str => str.trim());
              let nimm_keyword = userS1.split(" ")[0]; // Trenne das erste Wort vom Rest des Satzes
              userS1 = userS1.replace(nimm_keyword, "").trim();
              let userRS = userS2.replace(userS1, "").trim(); // Entferne das Wort aus userS1 aus userS2
              return `Okay, "${userS1}" aus "${userS2}" ist "${userRS}".`;
            } else {
              return 'I dont know the answer. Please enter my answer to that question';
            }
          } else if (userQuestion.includes('count till')) {
            try {
              // Zahl extrahieren und in eine Ganzzahl konvertieren
              let number = parseInt(userQuestion.match(/\b\d+\b/)[0]);
              if (number > 0) {
                // Wenn die Zahl größer als 0 ist, Zahlen von 1 bis zur angegebenen Zahl aufzählen
                let count_list = Array.from({length: number}, (_, i) => i + 1).join(', ');
                return `i will count till: ${number}: ${count_list}`;
              } else {
                // Wenn die Zahl nicht größer als 0 ist, eine entsprechende Nachricht senden
                return 'please enter a positiv number.';
              }
            } catch (error) {
              // Wenn ein Fehler beim Extrahieren oder Konvertieren der Zahl auftritt
              return 'please enter a valid number.';
            }
          } else if (userQuestion.includes('zähle bis')) {
            try {
              // Zahl extrahieren und in eine Ganzzahl konvertieren
              let number = parseInt(userQuestion.match(/\b\d+\b/)[0]);
              if (number > 0) {
                // Wenn die Zahl größer als 0 ist, Zahlen von 1 bis zur angegebenen Zahl aufzählen
                let count_list = Array.from({length: number}, (_, i) => i + 1).join(', ');
                return `Ich zähle bis ${number}: ${count_list}`;
              } else {
                // Wenn die Zahl nicht größer als 0 ist, eine entsprechende Nachricht senden
                return 'Bitte geben Sie eine positive Zahl an.';
              }
            } catch (error) {
              // Wenn ein Fehler beim Extrahieren oder Konvertieren der Zahl auftritt
              return 'Bitte geben Sie eine gültige Zahl an.';
            }
          } else if (userQuestion.includes('ich bin ')) {
            try {
              // Alter extrahieren und in eine Ganzzahl konvertieren
              let userQuestionzwei = userQuestion.replace('jahre alt', '');
              let age1 = userQuestionzwei.split("ich bin ")[1];
              let max_human_age = "120"; // Maximales dokumentiertes Alter eines Menschen
              if (parseInt(age1) > parseInt(max_human_age)) {
                // Wenn das Alter das maximale Menschenausmaß übersteigt
                return 'So alt kann ein Mensch nicht werden.';
              } else {
                // Wenn das Alter innerhalb des menschlichen Bereichs liegt
                return 'Cool!';
              }
            } catch (error) {
              // Wenn ein Fehler beim Extrahieren oder Konvertieren des Alters auftritt
              return 'okay';
            }
          } else if (userQuestion.includes('i am ')) {
            try {
              // Alter extrahieren und in eine Ganzzahl konvertieren
              let userQuestiontwo = userQuestion.replace('years old', '');
              let age1 = userQuestiontwo.split("i am ")[1];
              let max_human_age = "120"; // Maximales dokumentiertes Alter eines Menschen
              if (parseInt(age1) > parseInt(max_human_age)) {
                // Wenn das Alter das maximale Menschenausmaß übersteigt
                return 'So alt kann ein Mensch nicht werden.';
              } else {
                // Wenn das Alter innerhalb des menschlichen Bereichs liegt
                return 'Cool!';
              }
            } catch (error) {
              // Wenn ein Fehler beim Extrahieren oder Konvertieren des Alters auftritt
              return 'okay';
            }
          } else if (userQuestion.includes('give me') && userQuestion.includes('password')) {
            // Zufällige Zahlen und Buchstaben generieren
            let random_number = Math.floor(Math.random() * 900000) + 100000;
            let random_index = Math.floor(Math.random() * 6);
            let random_letter = String.fromCharCode(Math.floor(Math.random() * 26) + 97);
            let random_number2 = Math.floor(Math.random() * 900000) + 100000;
            let random_index2 = Math.floor(Math.random() * 6);
            let random_letter2 = String.fromCharCode(Math.floor(Math.random() * 26) + 97);
            let random_lr = Array.from({length: 6}, () => String.fromCharCode(Math.floor(Math.random() * 26) + 97)).join('');
            let password_with_letter = random_number.toString().replace(random_number.toString().charAt(random_index), random_letter);
            let password_with_letter2 = random_number2.toString().replace(random_number2.toString().charAt(random_index2), random_number2.toString());
            let random_number3 = random_number.toString().replace(random_number2.toString().charAt(random_index2), random_number.toString());
            let random_letter3 = random_lr.replace(random_letter2, random_letter);

            // Passwort je nach Benutzeranfrage generieren
            if (userQuestion.includes('number')) {
              return `Please note that the password is randomly generated. Here is the password: ${password_with_letter2}`;
            } else if (userQuestion.includes('letter')) {
              return `Please note that the password is randomly generated. Here is the password: ${random_letter3}`;
            } else {
              return `Please note that the password is randomly generated. Here is the password: ${password_with_letter}`;
            }
          } else if (userQuestion.includes('gib mir') && userQuestion.includes('passwort')) {
            // Zufällige Zahlen und Buchstaben generieren
            let random_number = Math.floor(Math.random() * 900000) + 100000;
            let random_index = Math.floor(Math.random() * 6);
            let random_letter = String.fromCharCode(Math.floor(Math.random() * 26) + 97);
            let random_number2 = Math.floor(Math.random() * 900000) + 100000;
            let random_index2 = Math.floor(Math.random() * 6);
            let random_letter2 = String.fromCharCode(Math.floor(Math.random() * 26) + 97);
            let random_lr = Array.from({length: 6}, () => String.fromCharCode(Math.floor(Math.random() * 26) + 97)).join('');
            let password_with_letter = random_number.toString().replace(random_number.toString().charAt(random_index), random_letter);
            let password_with_letter2 = random_number2.toString().replace(random_number2.toString().charAt(random_index2), random_number2.toString());
            let random_number3 = random_number.toString().replace(random_number2.toString().charAt(random_index2), random_number.toString());
            let random_letter3 = random_lr.replace(random_letter2, random_letter);

            // Passwort je nach Benutzeranfrage generieren
            if (userQuestion.includes('nummer')) {
              return `Bitte beachten Sie, dass das Passwort zufällig generiert ist. Hier ist das Passwort: ${password_with_letter2}`;
            } else if (userQuestion.includes('buchstabe')) {
              return `Bitte beachten Sie, dass das Passwort zufällig generiert ist. Hier ist das Passwort: ${random_letter3}`;
            } else {
              return `Bitte beachten Sie, dass das Passwort zufällig generiert ist. Hier ist das Passwort: ${password_with_letter}`;
            }
          } else if (userQuestion.includes('sag:')) {
            // Text extrahieren, der nach "sag:" kommt
            let textt = userQuestion.replace("sag:", "");
            // Antwort mit dem extrahierten Text senden
            return textt;
          } else if (userQuestion.includes('sag mir:')) {
            // Text extrahieren, der nach "sag:" kommt
            let textt = userQuestion.replace("sag mir:", "");
            // Antwort mit dem extrahierten Text senden
            return textt;
          } else if (userQuestion.includes('say:')) {
            // Text extrahieren, der nach "sag:" kommt
            let textt = userQuestion.replace("say:", "");
            // Antwort mit dem extrahierten Text senden
            return textt;
          } else if (userQuestion.includes("how should") && userQuestion.includes("i") && userQuestion.includes("call")) {
            let word = userQuestion.split("call")[1].replace("?", "").trim();
            // Ersetzen von Pronomen für eine konsistente Antwort
            word = word.replace("my self", "you").replace("my ", "your ").replace("your ", "my ").replace("you", "me");
            // Überprüfen, welche Art von Namen der Benutzer möchte
            if (userQuestion.includes("male") || userQuestion.includes("boy")) {
              return `I think a good name for ${word} could be: "${JJnamen[Math.floor(Math.random() * JJnamen.length)]}".`;
            } else if (userQuestion.includes("female") || userQuestion.includes("girl")) {
              return `I think a good name for ${word} could be: "${MMnamen[Math.floor(Math.random() * MMnamen.length)]}".`;
            } else {
              let allenamen = AAnamen[Math.floor(Math.random() * AAnamen.length)];
              return `I think a good name for ${word} could be: "${allenamen[Math.floor(Math.random() * allenamen.length)]}".`;
            }
          } else if (userQuestion.includes("what would be") && userQuestion.includes("a") && userQuestion.includes("name for")) {
            let word = userQuestion.split("name for")[1].replace("?", "").trim();
            // Ersetzen von Pronomen für eine konsistente Antwort
            word = word.replace("my self", "you").replace("my ", "your ").replace("your ", "my ").replace("you", "me");
            // Überprüfen, welche Art von Namen der Benutzer möchte
            if (userQuestion.includes("male") || userQuestion.includes("boy")) {
              return `I think a good name for ${word} could be: "${JJnamen[Math.floor(Math.random() * JJnamen.length)]}".`;
            } else if (userQuestion.includes("female") || userQuestion.includes("girl")) {
              return `I think a good name for ${word} could be: "${MMnamen[Math.floor(Math.random() * MMnamen.length)]}".`;
            } else {
              let allenamen = AAnamen[Math.floor(Math.random() * AAnamen.length)];
              return `I think a good name for ${word} could be: "${allenamen[Math.floor(Math.random() * allenamen.length)]}".`;
            }
          } else if (userQuestion.includes("wie sollte") && userQuestion.includes("ich") && userQuestion.includes("nennen")) {
            let word1 = userQuestion.split("ich")[1].replace("?", "").trim();
            // Ersetzen von Pronomen für eine konsistente Antwort
            word1 = word1.replace("meine", "deine").replace("mein", "dein").replace("dein", "mein").replace("deine", "meine").replace("dich", "mich");
            let word = word1.replace("nennen", "").trim();
            // Überprüfen, welche Art von Namen der Benutzer möchte
            if (userQuestion.includes("männlich") || userQuestion.includes("jung")) {
              return `Ich glaube ein guter Name für ${word} könnte: "${Jnamen[Math.floor(Math.random() * Jnamen.length)]}" sein.`;
            } else if (userQuestion.includes("weiblich") || userQuestion.includes("mädchen")) {
              return `Ich glaube ein guter Name für ${word} könnte: "${Mnamen[Math.floor(Math.random() * Mnamen.length)]}" sein.`;
            } else {
              let allenamen = Anamen[Math.floor(Math.random() * Anamen.length)];
              return `Ich glaube ein guter Name für ${word} könnte: "${allenamen[Math.floor(Math.random() * allenamen.length)]}" sein.`;
            }
          } else if (userQuestion.includes("was wäre") && userQuestion.includes("ein") && userQuestion.includes("name für")) {
            let word1 = userQuestion.split("name für")[1].replace("?", "").trim();
            // Ersetzen von Pronomen für eine konsistente Antwort
            word1 = word1.replace("meine", "deine").replace("mein", "dein").replace("dein", "mein").replace("deine", "meine").replace("dich", "mich");
            let word = word1.trim();
            // Überprüfen, welche Art von Namen der Benutzer möchte
            if (userQuestion.includes("männlich") || userQuestion.includes("jung")) {
              return `Ich glaube ein guter Name für ${word} könnte: "${Jnamen[Math.floor(Math.random() * Jnamen.length)]}" sein.`;
            } else if (userQuestion.includes("weiblich") || userQuestion.includes("mädchen")) {
              return `Ich glaube ein guter Name für ${word} könnte: "${Mnamen[Math.floor(Math.random() * Mnamen.length)]}" sein.`;
            } else {
              let allenamen = Anamen[Math.floor(Math.random() * Anamen.length)];
              return `Ich glaube ein guter Name für ${word} könnte: "${allenamen[Math.floor(Math.random() * allenamen.length)]}" sein.`;
            }
          } else if (userQuestion.includes("ersetze") && userQuestion.includes("mit") && userQuestion.includes("in")) {
            // Zerlegen der Benutzereingabe, um die relevanten Teile zu extrahieren
            let teil2 = userQuestion.split("ersetze")[1];
            let teil4 = teil2.split("mit")[1];
            let teil3 = teil2.split("mit")[0];
            teil3 = teil3.trim().replace("mit", "");
            let teil6 = teil4.split("in")[1];
            let teil5 = teil4.split("in")[0];
            teil5 = teil5.trim().replace("in", "");

            // Überprüfen, ob der zu ersetzende Text im Zieltext enthalten ist
            if (teil6.includes(teil3)) {
              // Ersetzen des Textes und Erstellen der Antwort
              teil6 = teil6.replace(teil3, teil5);
              return 'Der bearbeitete Text: ' + teil6;
            } else {
              // Falls der zu ersetzende Text nicht im Zieltext enthalten ist
              return "Entschuldigung, aber '" + teil3 + "' ist nicht in '" + teil6 + "' enthalten.";
            }
          } else if (userQuestion.includes("replace") && userQuestion.includes("with") && userQuestion.includes("in")) {
            // Zerlegen der Benutzereingabe, um die relevanten Teile zu extrahieren
            let teil2 = userQuestion.split("replace")[1];
            let teil4 = teil2.split("with")[1];
            let teil3 = teil2.split("with")[0];
            teil3 = teil3.trim().replace("mit", "");
            let teil6 = teil4.split("in")[1];
            let teil5 = teil4.split("in")[0];
            teil5 = teil5.trim().replace("in", "");

            // Überprüfen, ob der zu ersetzende Text im Zieltext enthalten ist
            if (teil6.includes(teil3)) {
              // Ersetzen des Textes und Erstellen der Antwort
              teil6 = teil6.replace(teil3, teil5);
              return 'the edited Text: ' + teil6;
            } else {
              // Falls der zu ersetzende Text nicht im Zieltext enthalten ist
              return "sorry, but '" + teil3 + "' is not in '" + teil6 + "'.";
            }
          } else if (userQuestion.includes("wähle eine zahl") && userQuestion.includes("von") && userQuestion.includes("bis")) {
            // Zerlegen der Benutzereingabe, um den Bereich zu extrahieren
            let trash1 = userQuestion.split("von")[1];
            let word1 = trash1.split("bis")[0];
            let word2 = trash1.split("bis")[1];
            // Extrahieren der Zahlen aus den Textteilen
            let uword = word1.match(/\b\d+\b/);
            let uword2 = word2.match(/\b\d+\b/);
            uword = parseInt(uword[0]);
            uword2 = parseInt(uword2[0]);
            // Generieren einer Zufallszahl innerhalb des Bereichs
            let zahl;
            if (uword > uword2) {
              zahl = Math.floor(Math.random() * (uword - uword2 + 1)) + uword2;
            } else if (uword < uword2) {
              zahl = Math.floor(Math.random() * (uword2 - uword + 1)) + uword;
            } else {
              zahl = uword;
            }
            return `Ich wähle: ${zahl}`;
          } else if (userQuestion.includes("choose a number") && userQuestion.includes("from") && userQuestion.includes("to")) {
            // Zerlegen der Benutzereingabe, um den Bereich zu extrahieren
            let trash1 = userQuestion.split("from")[1];
            let word1 = trash1.split("to")[0];
            let word2 = trash1.split("to")[1];
            // Extrahieren der Zahlen aus den Textteilen
            let uword = word1.match(/\b\d+\b/);
            let uword2 = word2.match(/\b\d+\b/);
            uword = parseInt(uword[0]);
            uword2 = parseInt(uword2[0]);
            // Generieren einer Zufallszahl innerhalb des Bereichs
            let zahl;
            if (uword > uword2) {
              zahl = Math.floor(Math.random() * (uword - uword2 + 1)) + uword2;
            } else if (uword < uword2) {
              zahl = Math.floor(Math.random() * (uword2 - uword + 1)) + uword;
            } else {
              zahl = uword;
            }
            return `i choose: ${zahl}`;
          } else if (userQuestion.includes("du") && userQuestion.includes("schön") && !userQuestion.includes("nicht") && !userQuestion.includes("wunder")){
            if (document.body.classList.contains("beautiful-theme")) {
              beautifultheme();
              nicetheme();
            }else {
              nicetheme();
            }
            return "Danke, dass du mich schön findest!";
          } else if (userQuestion.includes("you") && userQuestion.includes("nice") && !userQuestion.includes("not")){
            if (document.body.classList.contains("beautiful-theme")) {
              beautifultheme();
              nicetheme();
            }else {
              nicetheme();
            }
            return "thank you, for finding me nice!";
          }else if (userQuestion.includes("du") && userQuestion.includes("wunder") && userQuestion.includes("schön") && !userQuestion.includes("nicht")){
            beautifultheme();
            return "Danke, dass du mich schön findest!";
          }else if (userQuestion.includes("you") && userQuestion.includes("beautiful") && !userQuestion.includes("not")){
            beautifultheme();
            return "Thank you for thinking im beautiful!";
          } else if (userQuestion.includes("gib mir") && userQuestion.includes("name")) {
            if (userQuestion.includes("männlich") || userQuestion.includes("jung")) {
              return 'Wie wäre es mit: ' + Jnamen[Math.floor(Math.random() * Jnamen.length)] + '.';
            } else if (userQuestion.includes("weiblich") || userQuestion.includes("mädchen")) {
              return 'Wie wäre es mit: ' + Mnamen[Math.floor(Math.random() * Mnamen.length)] + '.';
            } else {
              let allenamen = Anamen[Math.floor(Math.random() * Anamen.length)];
              return 'Wie wäre es mit: ' + allenamen[Math.floor(Math.random() * allenamen.length)] + '.';
            }
          } else if (/[0-9\+\-\*\/]/.test(userQuestion)) {
            try {
              // Ausdruck berechnen und Ergebnis ausgeben
              let expression = userQuestion.replace(/[a-zA-Z\s]/g, '');

              // Alle Zahlen und mathematischen Operationen finden
              let numbers = userQuestion.match(/\d+/g);
              let operations = userQuestion.match(/[-+*/]/g);

              // Mathematische Operationen durchführen
              let result = parseInt(numbers[0]);
              let numIndex = 1;
              operations.forEach(op => {
                let num = parseInt(numbers[numIndex]);
                switch (op) {
                  case '+':
                    result += num;
                    break;
                  case '-':
                    result -= num;
                    break;
                  case '*':
                    result *= num;
                    break;
                  case '/':
                    result /= num;
                    break;
                }
                numIndex++;
              });

              return `${result}.`;
            } catch (error) {
              let answer = get_answer_for_question(best_match, knowledge_base);
              return `${answer}`;
            }
          } else if (userQuestion.includes('englisch') && userQuestion.includes('lernen')) {
            chalange = "englisch";
            clean();
            return "okay, du lernst jetzt englisch";
          } else if (userQuestion.includes('englisch') && userQuestion.includes('üben')) {
            chalange = "englisch";
            clean();
            return "okay, du übst jetzt englisch";
          } else if (userQuestion.includes('mathe') && userQuestion.includes('lernen')) {
            chalange = "mathe";
            clean();
            return "okay, du lernst jetzt mathe";
          } else if (userQuestion.includes('mathe') && userQuestion.includes('üben')) {
            chalange = "mathe";
            clean();
            return "okay, du übst jetzt mathe";
          } else if (userQuestion.includes('learn') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you're going to learn german now";
          } else if (userQuestion.includes('practice') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you are going to practice german now";
          } else if (userQuestion.includes('learn') && userQuestion.includes('math')) {
            chalange = "math";
            clean();
            return "okay, you are going to learn math now";
          } else if (userQuestion.includes('practice') && userQuestion.includes('math')) {
            chalange = "math";
            clean();
            return "okay, you are going to practice math now";
          } else if (bestMatch) {
            const answer = getAnswerForQuestion(bestMatch, knowledgeBase);
            if (answer == "Sorry but i dont know your Name") {
              let name = document.getElementById("username-display");
              response = {message: `${name.textContent}`};
            } else if (answer.includes("(Username)")) {
              let name = document.getElementById("username-display");
              let text = answer.replace("(Username)", name.textContent);
              response = {message: `${text}`};
            } else {
              response = {message: `${answer}`};
            }

          } else {
            if (userQuestion.includes("?") && !userQuestion.includes(" ?")) {
              let userQuestion2 = userQuestion.replace("?", " ?");
              const knowledgeBase2 = await loadKnowledgeBase('knowledge_base.json');
              const questions2 = knowledgeBase.questions.map(q => q.question);
              const bestMatch2 = findBestMatch(userQuestion2, questions2);
              if (bestMatch2) {
                const newanswer = getAnswerForQuestion(bestMatch2, knowledgeBase2);
                if (newanswer == "Sorry but i dont know your Name") {
                  let name = document.getElementById("username-display");
                  response = {message: `${name.textContent}`};
                } else if (newanswer.includes("(Username)")) {
                  let name = document.getElementById("username-display");
                  let text = newanswer.replace("(Username)", name.textContent);
                  response = {message: `${text}`};
                } else {
                  response = {message: `${newanswer}`};
                }
              } else {
                if (userQuestion.includes("was") && userQuestion.includes("ist")) {
                  let word2 = userQuestion.split("ist")[1];
                  if (word2.includes("?")) {
                    word2 = word2.replace("?", "");
                  }
                  response = {message: `ich weiß nicht, was ${word2} ist`};
                } else if (userQuestion.includes("what") && userQuestion.includes("is")) {
                  let word2 = userQuestion.split("is")[1];
                  if (word2.includes("?")) {
                    word2 = word2.replace("?", "");
                  }
                  response = {message: `i dont know what ${word2} is`};
                } else {
                  let userQuestion3 = userQuestion.replace(" ?", "?");
                  const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
                  const questions3 = knowledgeBase.questions.map(q => q.question);
                  const bestMatch3 = findBestMatch2(userQuestion3, questions3);
                  if (bestMatch3) {
                    const newanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
                    if (newanswer == "Sorry but i dont know your Name") {
                      let name = document.getElementById("username-display");
                      response = {message: `${name.textContent}`};
                    } else if (newanswer.includes("(Username)")) {
                      let name = document.getElementById("username-display");
                      let text = newanswer.replace("(Username)", name.textContent);
                      response = {message: `${text}`};
                    } else {
                      response = {message: `${newanswer}`};
                    }
                  } else {
                    response = {message: 'sorry but i do not know how to answer to that question'};
                  }
                }
              }
            } else if (userQuestion.includes(" ?") && !userQuestion.includes("?")) {
              let userQuestion2 = userQuestion.replace(" ?", "?");
              const knowledgeBase2 = await loadKnowledgeBase('knowledge_base.json');
              const questions2 = knowledgeBase.questions.map(q => q.question);
              const bestMatch2 = findBestMatch(userQuestion2, questions2);
              if (bestMatch2) {
                const newanswer = getAnswerForQuestion(bestMatch2, knowledgeBase2);
                if (newanswer == "Sorry but i dont know your Name") {
                  let name = document.getElementById("username-display");
                  response = {message: `${name.textContent}`};
                } else if (newanswer.includes("(Username)")) {
                  let name = document.getElementById("username-display");
                  let text = newanswer.replace("(Username)", name.textContent);
                  response = {message: `${text}`};
                } else {
                  response = {message: `${newanswer}`};
                }
              } else {
                if (userQuestion.includes("was") && userQuestion.includes("ist")) {
                  let word2 = userQuestion.split("ist")[1];
                  if (word2.includes("?")) {
                    word2 = word2.replace("?", "");
                  }
                  response = {message: `ich weiß nicht, was ${word2} ist`};
                } else if (userQuestion.includes("what") && userQuestion.includes("is")) {
                  let word2 = userQuestion.split("is")[1];
                  if (word2.includes("?")) {
                    word2 = word2.replace("?", "");
                  }
                  response = {message: `i dont know what ${word2} is`};
                } else {
                  let userQuestion3 = userQuestion.replace(" ?", "?");
                  const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
                  const questions3 = knowledgeBase.questions.map(q => q.question);
                  const bestMatch3 = findBestMatch2(userQuestion3, questions3);
                  if (bestMatch3) {
                    const newanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
                    if (newanswer == "Sorry but i dont know your Name") {
                      let name = document.getElementById("username-display");
                      response = {message: `${name.textContent}`};
                    } else if (newanswer.includes("(Username)")) {
                      let name = document.getElementById("username-display");
                      let text = newanswer.replace("(Username)", name.textContent);
                      response = {message: `${text}`};
                    } else {
                      response = {message: `${newanswer}`};
                    }
                  } else {
                    response = {message: 'sorry but i do not know how to answer to that question'};
                  }
                }
              }
            } else {
              if (userQuestion.includes("was") && userQuestion.includes("ist")) {
                let word2 = userQuestion.split("ist")[1];
                if (word2.includes("?")) {
                  word2 = word2.replace("?", "");
                }
                response = {message: `ich weiß nicht, was ${word2} ist`};
              } else if (userQuestion.includes("what") && userQuestion.includes("is")) {
                let word2 = userQuestion.split("is")[1];
                if (word2.includes("?")) {
                  word2 = word2.replace("?", "");
                }
                response = {message: `i dont know what ${word2} is`};
              } else {
                let userQuestion2 = userQuestion.replace(" ?", "?");
                const knowledgeBase2 = await loadKnowledgeBase('knowledge_base.json');
                const questions2 = knowledgeBase.questions.map(q => q.question);
                const bestMatch2 = findBestMatch2(userQuestion2, questions2);
                if (bestMatch2) {
                  const newanswer = getAnswerForQuestion(bestMatch2, knowledgeBase2);
                  if (newanswer == "Sorry but i dont know your Name") {
                    let name = document.getElementById("username-display");
                    response = {message: `${name.textContent}`};
                  } else if (newanswer.includes("(Username)")) {
                    let name = document.getElementById("username-display");
                    let text = newanswer.replace("(Username)", name.textContent);
                    response = {message: `${text}`};
                  } else {
                    response = {message: `${newanswer}`};
                  }
                } else {
                  response = {message: 'sorry but i do not know how to answer to that question'};
                }
              }
            }
          }

          return response.message;
        } else if (chalange == "englisch") {
          const userQuestion = userMessage.toLowerCase();
          const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
          const questions = knowledgeBase.questions.map(q => q.question);
          const bestMatch2 = findBestMatch(userQuestion, questions);
          if (thequestion == "nothing") {
            await loadTasks();
            if (tasks.length === 0) {
              return 'No tasks available';
            }
            const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
            thequestion = randomTask.Frage;
            theanswer = randomTask.Antwort;
            return thequestion;

          } else {
            if (userQuestion === theanswer) {
              if (tasks.length === 0) {
                return 'No tasks available';
              }
              const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
              thequestion = randomTask.Frage;
              theanswer = randomTask.Antwort;
              return 'Richtig! hier ist die neue aufgabe. ' + thequestion;
            } else if (userQuestion.includes("idk")) {
              if (tasks.length === 0) {
                return 'No tasks available';
              }
              const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
              thequestion = randomTask.Frage;
              theoldanswer = theanswer;
              theanswer = randomTask.Antwort;
              return 'die richtige antwort ist: ' + theoldanswer + ' hier ist die neue aufgabe ' + thequestion;
            } else if (userQuestion.includes("nächste aufgabe")) {
              if (tasks.length === 0) {
                return 'No tasks available';
              }
              const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
              thequestion = randomTask.Frage;
              theoldanswer = theanswer;
              theanswer = randomTask.Antwort;
              return 'die richtige antwort ist: ' + theoldanswer + ' hier ist die neue aufgabe ' + thequestion;
            } else if (userQuestion.includes('zurück') && userQuestion.includes('chat')) {
              chalange = "nothing";
              clean();
              return "okay, du bist zurück im normalen gespräch";
            } else if (userQuestion.includes('gespräch') && userQuestion.includes('zurück')) {
              chalange = "nothing";
              clean();
              return "okay, du bist nun wieder im normalen gespräch";
            } else if (userQuestion.includes('mathe') && userQuestion.includes('lernen')) {
              chalange = "mathe";
              clean();
              return "okay, du lernst jetzt mathe";
            } else if (userQuestion.includes('mathe') && userQuestion.includes('üben')) {
              chalange = "mathe";
              clean();
              return "okay, du übst jetzt mathe";
            } else if (userQuestion.includes('learn') && userQuestion.includes('german')) {
              chalange = "german";
              clean();
              return "okay, you're going to learn german now";
            } else if (userQuestion.includes('practice') && userQuestion.includes('german')) {
              chalange = "german";
              clean();
              return "okay, you are going to practice german now";
            } else if (userQuestion.includes('learn') && userQuestion.includes('math')) {
              chalange = "math";
              clean();
              return "okay, you are going to learn math now";
            } else if (userQuestion.includes('practice') && userQuestion.includes('math')) {
              chalange = "math";
              clean();
              return "okay, you are going to practice math now";
            } else if (userQuestion.includes("ja") && asktg == "yes") {
              aotink = "0";
              asktg = "no";
              chalange = "nothing";
              clean();
              return "okay, du bist zurück im normalen gespräch";
            } else if (userQuestion.includes("nein") && asktg == "yes") {
              aotink = "0";
              asktg = "no";
              chalange = "englisch";
              return "okay, du bist nicht zurück im normalen gespräch";
            } else if (bestMatch2) {
              const answer = getAnswerForQuestion(bestMatch2, knowledgeBase);
              if (answer == "Sorry but i dont know your Name") {
                let name = document.getElementById("username-display");
                response = {message: `${name.textContent}`};
              } else if (answer.includes("(Username)")) {
                let name = document.getElementById("username-display");
                let text = answer.replace("(Username)", name.textContent);
                response = {message: `${text}`};
              } else {
                response = {message: `${answer}`};
              }

              if (parseInt(aotink) + 1 == 7) {
                asktg = "yes";
                return "möchtest du die aufgaben ignorieren und in das normale gespräch zurück?";
              } else {
                aotink = parseInt(aotink) + 1;
                return response.message;
              }
            } else {
              let userQuestion3 = userQuestion.replace(" ?", "?");
              const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
              const questions3 = knowledgeBase.questions.map(q => q.question);
              const bestMatch3 = findBestMatch2(userQuestion3, questions3);
              if (bestMatch3) {
                const rnewanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
                response = {message: `${rnewanswer}`};
              } else {
                response = {message: 'Falsch! Versuchen Sie es erneut.'};
              }
              return response.message;

            }
          }

        } else if (chalange == "german") {
          const userQuestion = userMessage.toLowerCase();
          const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
          const questions = knowledgeBase.questions.map(q => q.question);
          const bestMatch2 = findBestMatch(userQuestion, questions);
          if (thequestion2 == "nothing") {
            await loadTasks2();
            if (tasks2.length === 0) {
              return 'No tasks available';
            }
            const randomTask2 = tasks2[Math.floor(Math.random() * tasks2.length)];
            thequestion2 = randomTask2.Frage;
            theanswer2 = randomTask2.Antwort;
            return thequestion2;

          } else {
            if (userQuestion == theanswer2) {
              if (tasks2.length === 0) {
                return 'No tasks available';
              }
              const randomTask2 = tasks2[Math.floor(Math.random() * tasks2.length)];
              thequestion2 = randomTask2.Frage;
              theanswer2 = randomTask2.Antwort;
              return 'correct! here you have a new question: ' + thequestion2;
            } else if (userQuestion.includes("idk")) {
              if (tasks2.length === 0) {
                return 'No tasks available';
              }
              const randomTask2 = tasks2[Math.floor(Math.random() * tasks2.length)];
              thequestion2 = randomTask2.Frage;
              theoldanswer2 = theanswer2;
              theanswer2 = randomTask2.Antwort;
              return 'the correct answer is: ' + theoldanswer2 + ' here you have a new question ' + thequestion2;
            } else if (userQuestion.includes("next question")) {
              if (tasks2.length === 0) {
                return 'No tasks available';
              }
              const randomTask2 = tasks2[Math.floor(Math.random() * tasks2.length)];
              thequestion2 = randomTask2.Frage;
              theoldanswer2 = theanswer2;
              theanswer2 = randomTask2.Antwort;
              return 'the correct answer is: ' + theoldanswer2 + ' here you have a new question ' + thequestion2;
            } else if (userQuestion.includes('englisch') && userQuestion.includes('lernen')) {
              chalange = "englisch";
              clean();
              return "okay, du lernst jetzt englisch";
            } else if (userQuestion.includes('englisch') && userQuestion.includes('üben')) {
              chalange = "englisch";
              clean();
              return "okay, du übst jetzt englisch";
            } else if (userQuestion.includes('mathe') && userQuestion.includes('lernen')) {
              chalange = "mathe";
              clean();
              return "okay, du lernst jetzt mathe";
            } else if (userQuestion.includes('mathe') && userQuestion.includes('üben')) {
              chalange = "mathe";
              clean();
              return "okay, du übst jetzt mathe";
            } else if (userQuestion.includes('back') && userQuestion.includes('chat')) {
              chalange = "nothing";
              clean();
              return "okay, you're back in the normal chat";
            } else if (userQuestion.includes('normal') && userQuestion.includes('chat')) {
              chalange = "nothing";
              clean();
              return "okay, you are back in the normal chat";
            } else if (userQuestion.includes('learn') && userQuestion.includes('math')) {
              chalange = "math";
              clean();
              return "okay, you are going to learn math now";
            } else if (userQuestion.includes('practice') && userQuestion.includes('math')) {
              chalange = "math";
              clean();
              return "okay, you are going to practice math now";
            } else if (userQuestion.includes("yes") && asktg == "yes") {
              aotink = "0";
              asktg = "no";
              chalange = "nothing";
              clean();
              return "okay, you are back in the normal chat";
            } else if (userQuestion.includes("no") && asktg == "yes") {
              aotink = "0";
              asktg = "no";
              chalange = "german";
              return "okay, you are not back in the normal chat";
            } else if (bestMatch2) {
              const answer = getAnswerForQuestion(bestMatch2, knowledgeBase);
              if (answer == "Sorry but i dont know your Name") {
                let name = document.getElementById("username-display");
                response = {message: `${name.textContent}`};
              } else if (answer.includes("(Username)")) {
                let name = document.getElementById("username-display");
                let text = answer.replace("(Username)", name.textContent);
                response = {message: `${text}`};
              } else {
                response = {message: `${answer}`};
              }
              if (parseInt(aotink) + 1 == 7) {
                asktg = "yes";
                return "do you want to ignore the tasks and go back to the normal chat?";
              } else {
                aotink = parseInt(aotink) + 1;
                return response.message;
              }
            } else {
              let userQuestion3 = userQuestion.replace(" ?", "?");
              const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
              const questions3 = knowledgeBase.questions.map(q => q.question);
              const bestMatch3 = findBestMatch2(userQuestion3, questions3);
              if (bestMatch3) {
                const rnewanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
                response = {message: `${rnewanswer}`};
              } else {
                response = {message: 'wrong! try again.'};
              }
              /*return response.message;*/
              return response.message;
            }
          }

        } else if (chalange == "mathe") {
          const userQuestion = userMessage.toLowerCase();
          const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
          const questions = knowledgeBase.questions.map(q => q.question);
          const bestMatch2 = findBestMatch(userQuestion, questions);
          if (themathquestion == "" && userQuestion.includes("leicht")) {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            leicht1 = "leicht";
            return themathquestion;
            // if the user question == the answer to the mathematical question, return "correct"

          } else if (themathquestion == "" && !userQuestion.includes("leicht")) {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return themathquestion;
            // if the user question == the answer to the mathematical question, return "correct"

          } else if (userQuestion == themathanswer && leicht1 != "leicht") {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return 'Richtig! hier hast du die nächste aufgabe ' + themathquestion;
          } else if (userQuestion == themathanswer && leicht1 == "leicht") {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return 'Richtig! hier hast du die nächste aufgabe ' + themathquestion;
          } else if (themathquestion != "" && userQuestion.includes("idk") && leicht1 != "leicht") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            //the oldmathanswer to string
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + "wenn du " + oldnum1 + " finger hast und jeder finger den wert von " + oldnum2 + " hat, Addierst du jeden finger mit einander bis keine finger mehr übrig sind und dann hast du das ergebniss" + ". die neue frage ist: " + themathquestion;
            } else if (oldoperator == "/") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " du musst einfach gucken wie oft die zahl " + oldnum2 + " in die zahl " + oldnum1 + " passt" + ". die neue aufgabe ist: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " weil " + oldnum2 + " größer als " + oldnum1 + " ist, müssen wir die zahlen einfach umdrehen. also " + oldnum2 + " - " + oldnum1 + " und dann müssen wir einfach das Subtraktions zeichen am anfang der zahl hinzufügen. die neue aufgabe ist: " + themathquestion;
            } else {
              return "die richtige antwort ist: " + theoldmathanswer + ". die neue aufgabe ist: " + themathquestion;
            }
          } else if (themathquestion != "" && userQuestion.includes("idk") && leicht1 == "leicht") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + "wenn du " + oldnum1 + " finger hast und jeder finger den wert von " + oldnum2 + " hat, Addierst du jeden finger mit einander bis keine finger mehr übrig sind und dann hast du das ergebniss" + ". die neue frage ist: " + themathquestion;
            } else if (oldoperator == "/") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " du musst einfach gucken wie oft die zahl " + oldnum2 + " in die zahl " + oldnum1 + " passt" + ". die neue aufgabe ist: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " weil " + oldnum2 + " größer als " + oldnum1 + " ist, müssen wir die zahlen einfach umdrehen. also " + oldnum2 + " - " + oldnum1 + " und dann müssen wir einfach das Subtraktions zeichen am anfang der zahl hinzufügen. die neue aufgabe ist: " + themathquestion;
            } else {
              return "die richtige antwort ist: " + theoldmathanswer + ". die neue aufgabe ist: " + themathquestion;
            }
          } else if (themathquestion != "" && userQuestion.includes("nächste aufgabe") && leicht1 != "leicht") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            //the oldmathanswer to string
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + "wenn du " + oldnum1 + " finger hast und jeder finger den wert von " + oldnum2 + " hat, Addierst du jeden finger mit einander bis keine finger mehr übrig sind und dann hast du das ergebniss" + ". die neue frage ist: " + themathquestion;
            } else if (oldoperator == "/") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " du musst einfach gucken wie oft die zahl " + oldnum2 + " in die zahl " + oldnum1 + " passt" + ". die neue aufgabe ist: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " weil " + oldnum2 + " größer als " + oldnum1 + " ist, müssen wir die zahlen einfach umdrehen. also " + oldnum2 + " - " + oldnum1 + " und dann müssen wir einfach das Subtraktions zeichen am anfang der zahl hinzufügen. die neue aufgabe ist: " + themathquestion;
            } else {
              return "die richtige antwort ist: " + theoldmathanswer + ". die neue aufgabe ist: " + themathquestion;
            }
          } else if (themathquestion != "" && userQuestion.includes("nächste aufgabe") && leicht1 == "leicht") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + "wenn du " + oldnum1 + " finger hast und jeder finger den wert von " + oldnum2 + " hat, Addierst du jeden finger mit einander bis keine finger mehr übrig sind und dann hast du das ergebniss" + ". die neue frage ist: " + themathquestion;
            } else if (oldoperator == "/") {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " du musst einfach gucken wie oft die zahl " + oldnum2 + " in die zahl " + oldnum1 + " passt" + ". die neue aufgabe ist: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "die richtige antwort ist: " + theoldmathanswer + ". " + " weil " + oldnum2 + " größer als " + oldnum1 + " ist, müssen wir die zahlen einfach umdrehen. also " + oldnum2 + " - " + oldnum1 + " und dann müssen wir einfach das Subtraktions zeichen am anfang der zahl hinzufügen. die neue aufgabe ist: " + themathquestion;
            } else {
              return "die richtige antwort ist: " + theoldmathanswer + ". die neue aufgabe ist: " + themathquestion;
            }
          } else if (userQuestion.includes('englisch') && userQuestion.includes('lernen')) {
            chalange = "englisch";
            clean();
            return "okay, du lernst jetzt englisch";
          } else if (userQuestion.includes('englisch') && userQuestion.includes('üben')) {
            chalange = "englisch";
            clean();
            return "okay, du übst jetzt englisch";
          } else if (userQuestion.includes('zu') && userQuestion.includes('gespräch')) {
            chalange = "nothing";
            clean();
            return "okay, du bist nun wieder im normalen gespräch";
          } else if (userQuestion.includes('zurück') && userQuestion.includes('chat')) {
            chalange = "nothing";
            clean();
            return "okay, du bist zurück im normalen chat";
          } else if (userQuestion.includes('learn') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you're going to learn german now";
          } else if (userQuestion.includes('practice') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you are going to practice german now";
          } else if (userQuestion.includes('learn') && userQuestion.includes('math')) {
            chalange = "math";
            clean();
            return "okay, you are going to learn math now";
          } else if (userQuestion.includes('practice') && userQuestion.includes('math')) {
            chalange = "math";
            clean();
            return "okay, you are going to practice math now";
          } else if (userQuestion.includes("ja") && asktg == "yes") {
            aotink = "0";
            asktg = "no";
            chalange = "nothing";
            clean();
            return "okay, du bist zurück im normalen gespräch";
          } else if (userQuestion.includes("nein") && asktg == "yes") {
            aotink = "0";
            asktg = "no";
            chalange = "mathe";
            return "okay, du bist nicht zurück im normalen gespräch";
          } else if (bestMatch2) {
            const answer = getAnswerForQuestion(bestMatch2, knowledgeBase);
            if (answer == "Sorry but i dont know your Name") {
              let name = document.getElementById("username-display");
              response = {message: `${name.textContent}`};
            } else if (answer.includes("(Username)")) {
              let name = document.getElementById("username-display");
              let text = answer.replace("(Username)", name.textContent);
              response = {message: `${text}`};
            } else {
              response = {message: `${answer}`};
            }
            /*return response.message;*/
            if (parseInt(aotink) + 1 == 7) {
              asktg = "yes";
              return "möchtest du die aufgaben ignorieren und wieder ins normale gespräch?";
            } else {
              aotink = parseInt(aotink) + 1;
              return response.message;
            }
          } else {
            let userQuestion3 = userQuestion.replace(" ?", "?");
            const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
            const questions3 = knowledgeBase.questions.map(q => q.question);
            const bestMatch3 = findBestMatch2(userQuestion3, questions3);
            if (bestMatch3) {
              const rnewanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
              response = {message: `${rnewanswer}`};
            } else {
              response = {message: 'Falsch! Versuchen Sie es erneut.'};
            }
            return response.message;
          }
        } else if (chalange == "math") {
          const userQuestion = userMessage.toLowerCase();
          const knowledgeBase = await loadKnowledgeBase('knowledge_base.json');
          const questions = knowledgeBase.questions.map(q => q.question);
          const bestMatch2 = findBestMatch(userQuestion, questions);
          if (themathquestion == "" && !userQuestion.includes("easy")) {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return themathquestion;
            // if the user question == the answer to the mathematical question, return "correct"

          } else if (themathquestion == "" && userQuestion.includes("easy")) {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            leicht2 = "easy";
            return themathquestion;
            // if the user question == the answer to the mathematical question, return "correct"

          } else if (userQuestion == themathanswer && leicht2 != "easy") {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return 'correct! there you have the next question: ' + themathquestion;
          } else if (userQuestion == themathanswer && leicht2 == "easy") {
            // create random math question
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            return 'correct! there you have the next question: ' + themathquestion;
          } else if (themathquestion != "" && userQuestion.includes("idk") && leicht2 != "easy") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "the right answer is: " + theoldmathanswer + ". " + "if you have " + oldnum1 + " fingers and every finger has the value of " + oldnum2 + " just Add each finger together until there are no more fingers left and you have the result. " + ". the new question is: " + themathquestion;
            } else if (oldoperator == "/") {
              return "the right answer is: " + theoldmathanswer + ". " + " you just have to see how often " + oldnum2 + " fits in " + oldnum1 + ". the new question is: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "the right answer is: " + theoldmathanswer + ". " + " because " + oldnum2 + " is larger than " + oldnum1 + " we just turn the numbers around and Subtract " + oldnum1 + " from " + oldnum2 + " and add the Subtraction sign on the beginning of the number" + ". the new question is: " + themathquestion;
            } else {
              return "the right answer is: " + theoldmathanswer + ". the new question is: " + themathquestion;
            }
          } else if (themathquestion != "" && userQuestion.includes("idk") && leicht2 == "easy") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "the right answer is: " + theoldmathanswer + ". " + "if you have " + oldnum1 + " fingers and every finger has the value of " + oldnum2 + " just Add each finger together until there are no more fingers left and you have the result. " + ". the new question is: " + themathquestion;
            } else if (oldoperator == "/") {
              return "the right answer is: " + theoldmathanswer + ". " + " you just have to see how often " + oldnum2 + " fits in " + oldnum1 + ". the new question is: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "the right answer is: " + theoldmathanswer + ". " + " because " + oldnum2 + " is larger than " + oldnum1 + " we just turn the numbers around and Subtract " + oldnum1 + " from " + oldnum2 + " and add the Subtraction sign on the beginning of the number" + ". the new question is: " + themathquestion;
            } else {
              return "the right answer is: " + theoldmathanswer + ". the new question is: " + themathquestion;
            }

          } else if (themathquestion != "" && userQuestion.includes("next question") && leicht2 != "easy") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "the right answer is: " + theoldmathanswer + ". " + "if you have " + oldnum1 + " fingers and every finger has the value of " + oldnum2 + " just Add each finger together until there are no more fingers left and you have the result. " + ". the new question is: " + themathquestion;
            } else if (oldoperator == "/") {
              return "the right answer is: " + theoldmathanswer + ". " + " you just have to see how often " + oldnum2 + " fits in " + oldnum1 + ". the new question is: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "the right answer is: " + theoldmathanswer + ". " + " because " + oldnum2 + " is larger than " + oldnum1 + " we just turn the numbers around and Subtract " + oldnum1 + " from " + oldnum2 + " and add the Subtraction sign on the beginning of the number" + ". the new question is: " + themathquestion;
            } else {
              return "the right answer is: " + theoldmathanswer + ". the new question is: " + themathquestion;
            }
          } else if (themathquestion != "" && userQuestion.includes("question") && leicht2 == "easy") {
            let oldnum1 = num1;
            let oldnum2 = num2;
            let oldoperator = operator;
            num1 = Math.floor(Math.random() * 10) + 1;
            num2 = Math.floor(Math.random() * 10) + 1;
            operator = ['+', '-'][Math.floor(Math.random() * 2)];
            theoldmathanswer = themathanswer;
            themathquestion = `${num1} ${operator} ${num2}`;
            themathanswer = eval(`${num1} ${operator} ${num2}`);
            let theoldmathanswer2 = theoldmathanswer.toString();
            if (oldoperator == "*") {
              return "the right answer is: " + theoldmathanswer + ". " + "if you have " + oldnum1 + " fingers and every finger has the value of " + oldnum2 + " just Add each finger together until there are no more fingers left and you have the result. " + ". the new question is: " + themathquestion;
            } else if (oldoperator == "/") {
              return "the right answer is: " + theoldmathanswer + ". " + " you just have to see how often " + oldnum2 + " fits in " + oldnum1 + ". the new question is: " + themathquestion;
            } else if (theoldmathanswer2.includes("-")) {
              return "the right answer is: " + theoldmathanswer + ". " + " because " + oldnum2 + " is larger than " + oldnum1 + " we just turn the numbers around and Subtract " + oldnum1 + " from " + oldnum2 + " and add the Subtraction sign on the beginning of the number" + ". the new question is: " + themathquestion;
            } else {
              return "the right answer is: " + theoldmathanswer + ". the new question is: " + themathquestion;
            }

          } else if (userQuestion.includes('englisch') && userQuestion.includes('lernen')) {
            chalange = "englisch";
            clean();
            return "okay, du lernst jetzt englisch";
          } else if (userQuestion.includes('englisch') && userQuestion.includes('üben')) {
            chalange = "englisch";
            clean();
            return "okay, du übst jetzt englisch";
          } else if (userQuestion.includes('mathe') && userQuestion.includes('lernen')) {
            chalange = "mathe";
            clean();
            return "okay, du lernst jetzt mathe";
          } else if (userQuestion.includes('mathe') && userQuestion.includes('üben')) {
            chalange = "mathe";
            clean();
            return "okay, du übst jetzt mathe";
          } else if (userQuestion.includes('learn') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you're going to learn german now";
          } else if (userQuestion.includes('practice') && userQuestion.includes('german')) {
            chalange = "german";
            clean();
            return "okay, you are going to practice german now";
          } else if (userQuestion.includes('back') && userQuestion.includes('chat')) {
            chalange = "nothing";
            clean();
            return "okay, you are back in the normal chat now";
          } else if (userQuestion.includes('normal') && userQuestion.includes('chat')) {
            chalange = "nothing";
            clean();
            return "okay, you're in the normal chat now";
          } else if (userQuestion.includes("ja") && asktg == "yes") {
            aotink = "0";
            asktg = "no";
            chalange = "nothing";
            clean();
            return "okay, you're back in the normal chat now";
          } else if (userQuestion.includes("no") && asktg == "yes") {
            aotink = "0";
            asktg = "no";
            chalange = "math";
            return "okay, you are not back in the normal chat";
          } else if (bestMatch2) {
            const answer = getAnswerForQuestion(bestMatch2, knowledgeBase);
            if (answer == "Sorry but i dont know your Name") {
              let name = document.getElementById("username-display");
              response = {message: `${name.textContent}`};
            } else if (answer.includes("(Username)")) {
              let name = document.getElementById("username-display");
              let text = answer.replace("(Username)", name.textContent);
              response = {message: `${text}`};
            } else {
              response = {message: `${answer}`};
            }
            if (parseInt(aotink) + 1 == 7) {
              asktg = "yes";
              return "do you want to ignore the tasks and go back to the normal chat?";
            } else {
              aotink = parseInt(aotink) + 1;
              return response.message;
            }
          } else {
            let userQuestion3 = userQuestion.replace(" ?", "?");
            const knowledgeBase3 = await loadKnowledgeBase('knowledge_base.json');
            const questions3 = knowledgeBase.questions.map(q => q.question);
            const bestMatch3 = findBestMatch2(userQuestion3, questions3);
            if (bestMatch3) {
              const rnewanswer = getAnswerForQuestion(bestMatch3, knowledgeBase3);
              response = {message: `${rnewanswer}`};
            } else {
              response = {message: 'wrong! try again.'};
            }
            return response.message;
          }
        }
      } catch (error) {
        return 'there was an error';
      }
    }


    function newknowledge() {
      var userInput = document.getElementById('user-input');
      var userMessage2 = userInput.value.trim();
      if (userMessage2 !== '') {
        addMessage(userMessage2, 'sent');


        // Simulierte Antwort vom Bot
        getBotResponse2(userMessage2)
          .then(response => {
            setTimeout(addMessage(response, 'received'), 1000);

            // Scrollen zum Ende der Chat-Nachrichten
            var chatMessages = document.getElementById('chat-messages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
          })
          .catch(error => console.error('Bot response error:', error));

        userInput.value = '';
      }
    }

    function getBotResponse2(userMessage2) {
      // Daten für die POST-Anfrage vorbereiten
      learnnonewthing();
      var data = {user_input: userMessage2, new_question: document.getElementById("remember").textContent};

      // AJAX-Anfrage senden
      return fetch('/new_knowledge', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json();
        })
        .then(data => {
          console.log(data); // Ausgabe der Antwort vom Server
          // Hier können Sie weitere Aktionen basierend auf der Serverantwort durchführen
          return data.message;
        })
        .catch(error => console.error('Error fetching bot response:', error));
    }

    function learnnewthing() {
      document.getElementById("button1").style.display = "none";
      document.getElementById("button2").style.display = "block";
      document.getElementById("button3").style.display = "block";
      document.getElementById("user-input").placeholder = "Enter the Answer to that question here...";
    }
    function learnnonewthing() {
      document.getElementById("button1").style.display = "block";
      document.getElementById("button2").style.display = "none";
      document.getElementById("button3").style.display = "none";
      document.getElementById("user-input").placeholder = "Type your message...";
    }
    var font2 = 'h3';
    function addMessage(text, type) {

      var chatMessages = document.getElementById('chat-messages');
      var messageElement = document.createElement(font2);
      messageElement.classList.add('message', type);
      messageElement.id = parseInt(idnum) + 1;
      idnum = parseInt(idnum) + 1;
      messageElement.textContent = text;
      chatMessages.appendChild(messageElement);
      say2(messageElement.textContent);


    }
    function nicetheme() {
      document.body.classList.toggle("nice-theme");
    }
    function beautifultheme() {
      document.body.classList.toggle("beautiful-theme");
    }

    function change_mood() {
      document.body.classList.toggle("dark-theme");
      if (document.body.classList.contains("dark-theme")) {
        document.getElementById("changetheme").textContent = "Light";
        document.querySelector(".bcft").textContent = "Light theme";
      } else if (document.body.classList.contains("nice-theme")) {
        document.body.classList.toggle("nice-theme");
        document.getElementById("changetheme").textContent = "Dark";
        document.querySelector(".bcft").textContent = "Dark theme";
      } else if (document.body.classList.contains("beautiful-theme")) {
        document.body.classList.toggle("beautiful-theme");
        document.getElementById("changetheme").textContent = "Dark";
        document.querySelector(".bcft").textContent = "Dark theme";
      } else {
        document.getElementById("changetheme").textContent = "Dark";
        document.querySelector(".bcft").textContent = "Dark theme";
      }
    }
    var navlinks = document.getElementById("navlinks");
    function showmenu() {
      if (navlinks.style.display == "none") {
        navlinks.style.display = "block";
      } else {
        navlinks.style.display = "none";
      }
    }
    var btnfs = document.querySelector(".bcft1");
    var btnf1 = document.getElementById("btnone");
    var btnf3 = document.getElementById("btnthree");
    function showfonts() {
      if (btnfs.style.display == "none") {
        document.getElementById("fontS").textContent = "Font size v";
        btnf1.style.display = "block";
        btnf3.style.display = "block";
      } else {
        document.getElementById("fontS").textContent = "Font size <";
        btnf1.style.display = "none";
        btnf3.style.display = "none";
      }
    }
    function font1() {
      font2 = 'h1';
    }
    function font3() {
      font2 = 'h3';
    }
    function setinputvalue() {
      const rand = ['Hi', 'Hello', 'How are you', 'How are you doing', 'What is your name', 'Who are you?', 'What are you?', 'What is Architecture', 'Whats a Computer'];
      const randq = rand[Math.floor(Math.random() * rand.length)];
      const input = document.getElementById('user-input');
      input.value = randq;
    }
    function helpbtn() {
      document.getElementById("btn3").textContent = "this function does not exist";
      setTimeout(function () {
        document.getElementById("btn3").textContent = "Help";
      }, 5000);
    }
    function isDarkMode() {
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        return true;
      } else {
        return false;
      }
    }

    // Function to update the mode information
    function updateModeInfo() {
      var modeInfo2 = document.getElementById("changetheme");
      var modeInfo = document.querySelector('.bcft');
      if (isDarkMode()) {
        modeInfo.textContent = "Light theme";
        modeInfo2.textContent = "Light";
        change_mood()
      } else {
        modeInfo.textContent = "Dark theme";
        modeInfo2.textContent = "Dark";
        change_mood()
      }
    }

    // Call the function initially
    updateModeInfo();

    // Listen for changes in mode preference
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateModeInfo);
    let speech = new SpeechSynthesisUtterance();

    let voices = [];
    let speakon = document.getElementById("speakon");

    window.speechSynthesis.onvoiceschanged = () => {
      voices = window.speechSynthesis.getVoices();
      speech.voice = voices[0];

      voices.forEach((voice, i) => (voiceSelect.options[i] = new Option(voice.name, i)));
    }
    function say2(textfs) {
      document.querySelectorAll('.speakon').forEach(function (element) {
        if (element.textContent == "speak: on") {
          speech.text = textfs;
          window.speechSynthesis.speak(speech);
        }
      });
    }
    /*speakon.addEventListener("click", () => {
      speakonoff();
    });*/
    document.querySelectorAll('.speakon').forEach(function (element) {
      element.addEventListener('click', function () {
        if (element.textContent == "speak: on") {
          element.textContent = "speak: off";
        } else {
          element.textContent = "speak: on";
        }
        // Ändert den Textinhalt des geklickten Elements
      });
    });
    function speakonoff() {
      if (speakon.textContent == "speak: on") {
        speakon.textContent = "speak: off";
      } else {
        speakon.textContent = "speak: on";
      }
    }
    /*speakon.addEventListener("click", function() {
      var speech1 = true;
      window.SpeechRecognition = window.webkitSpeechRecognition;
      const recognition = new SpeechRecognition();
      recognition.interimResults = true;

      recognition.addEventListener('result', (e) => {
        const transcript = Array.from(e.results)
        .map(result =>result[0])
        .map(result => result.transcript)
        document.getElementById("user-input").value = transcript;
      });
      if (speech1 == true){
        recognition.start();
      }
    });*/
    /*function say() {
      speech.text = document.getElementById("remember").textContent;
      window.speechSynthesis.speak(speech);
    }*/
  </script>
</body>

</html>
